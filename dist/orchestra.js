define("dataFlow/dataTree",["underscore"],function(e){function t(t){this.init(),delete this.pathId,delete this.data,e.isUndefined(t)||this.addChildAtPath(t,[0]),e.bindAll(this,"dataAtPath","setDataAtPath","recurseTree","flattenedTree","graftedTree","remappedTree")}function n(e,t){this.init(e,t)}return t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.prototype.objectType="DataTree",t.prototype.recurseTree=function(t){if("function"!=typeof t)throw new Error("recurseTree must be called with an iterator: function(data[,node])");!function n(o){e.isEmpty(o.data)||t(o.data,o);var i=e.keys(o.children);i.length>0&&e.each(i,function(e){n(o.children[e])})}(this)},t.prototype.fromJSON=function(t){var n=this;e.each(t,function(t,o){var i=e.map(o.split(";"),function(e){return Number(e)});n.setDataAtPath(t,i)})},t.prototype.toJSON=function(){var e={};return this.recurseTree(function(t,n){var o=n.getPath().join(";");e[o]=t}),e},t.prototype.flattenedTree=function(n){var o=[];if(this.recurseTree(function(t){e.each(t,function(e){o.push(e)})}),!n)return new t(o);this.data=o},t.prototype.dataAtPath=function(e,t){try{for(var n=e.slice(),o=this;n.length>0;)o=o.children[n.shift()];return!0===t?o.getFilteredData():o.data}catch(e){return[]}},t.prototype.copy=function(){return this.map()},t.prototype.map=function(n){var o=new t;return this.recurseTree(function(t,i){if("function"==typeof n){var r=e.map(t,function(e){return n(e)});r.length>0&&e.isArray(r[0])?e.each(r,function(e,t){var n=i.getPath();n.push(t),o.addChildAtPath(e,n,!0)}):o.addChildAtPath(r,i.getPath(),!0)}else o.addChildAtPath(t,i.getPath(),!0)}),o},t.prototype.setDataAtPath=function(e,t){return this.addChildAtPath(e,t,!0)},t.prototype.log=function(){var e=!0;this.recurseTree(function(t,n){e=!1,console.log("Path: ",n.getPath(),"      Data: ",t)}),e&&console.log("(Tree has no data)")},t.prototype.getMaxPathLength=function(){var t=1;return function n(o){var i=e.keys(o.children);i.length>0?e.each(i,function(e){n(o.children[e])}):t=Math.max(t,o.getPath().length)}(this),t},t.prototype.isEmpty=function(){var t=!0;return this.recurseTree(function(n){e.isEmpty(n)||(t=!1)}),t},t.prototype.graftedTree=function(){var n=new t;return this.recurseTree(function(t,o){var i=o.getPath().slice();e.each(t,function(e,t){var o=i.slice();o.push(t),n.addChildAtPath([e],o)})}),n},t.prototype.remappedTree=function(n,o){function i(e){return e.match(/(^.*\})/)[0].replace(/[^A-Za-z]/g," ").trim().split(" ")}function r(e){return e.match(/(\(.*$)/)[0].replace(/[^A-Za-z]/g," ").trim().split(" ")[0]}-1===n.indexOf("(")&&(n+="(i)"),-1===o.indexOf("(")&&(o+="(i)");var a=i(n),s=i(o),l=r(n),c=r(o),p=l!==c,d=e.map(a,function(t){var n=e.indexOf(a,t);return e.indexOf(s,t)-n}).slice(),u=new t;return p?(a.push(l),s.push(c),this.recurseTree(function(t,n){var o=n.getPath();e.each(n.data,function(t,n){var i=o.slice();i.push(n);var r={};e.each(a,function(e,t){r[e]=i[t]});var l=[];e.each(s,function(e,t){l[t]=r[e]});var c=l.pop();u.addSingleDataItemAtPathAndIndex(t,l,c)})})):this.recurseTree(function(e,t){for(var n=t.getPath().slice(),o=[],i=0;i<n.length;i++)o[i]=n[i+d[i]];u.addChildAtPath(t.data,o)}),u},n.prototype.init=function(t,n){var o=!e.isUndefined(t),i=e.isArray(t);if(o&&!i)throw new Error("Tried to assign a non-array to a Node in a Data Tree");o||(t=[]),this.data=t,this.children={},this.parent=n},n.prototype.objectType="Node",n.prototype.isRoot=function(){return e.isUndefined(this.parent)},n.prototype.addChildAtPath=function(t,o,i){if(!e.isArray(o))throw new Error("must pass pathArray to addChildAtPath");var r=o.slice();e.each(r,function(e){if(parseInt(e)!==e)throw new Error("Encountered non-integer array path: "+e)});return function e(o,r){var a=r.shift(),s=o.children[a]||new n([],o);return o.children[a]=s,s.pathId=a,r.length>0?e(s,r):(s.data=!0===i?t:s.data.concat(t),s)}(this,r)},n.prototype.addSingleDataItemAtPathAndIndex=function(e,t,n){var o=this.addChildAtPath([],t);return o.data[parseInt(n)]=e,o},n.prototype.getChildAtPath=function(t){var n=t.slice(0);return n.reverse(),function t(o){var i=n.pop();return e.isUndefined(i)?o:t(o.children[i])}(this)},n.prototype.getPathForChildNode=function(t){var n=this;e.each(e.keys(this.children),function(e){if(n.children[e]===t)return e})},n.prototype.getPath=function(){var t=[];return function n(o){e.isUndefined(o.pathId)||t.push(o.pathId),o.isRoot()||n(o.parent)}(this),t.reverse()},n.prototype.getFilteredData=function(){return e.filter(this.data,function(t){return!e.isNaN(t)&&!e.isNull(t)&&!e.isUndefined(t)})},t}),define("dataFlow/enums",[],function(){return{INTERPRET_AS:{ITEM:0,LIST:1,TREE:2},OUTPUT_TYPES:{NUMBER:0,BOOLEAN:1,NUMPY_ARR:2,STRING:3,DATAFRAME:4,WILD:5,NULL:6,UNUSED1:7,ARRAY:8},KEYS:{SHIFT:16},DISPLAY_NAMES:{INTERPRET_AS:{0:"Item",1:"List",2:"Tree"},OUTPUT_TYPES:{0:"Number",1:"Boolean",2:"Numpy Array",3:"String",4:"Pandas Dataframe",5:"(Any Data Type)",6:"Null",7:"Unused",8:"List / Array"}}}}),define("dataFlow/pulse",["underscore","backbone","dataFlow/enums"],function(e,t,n){return t.Model.extend({defaults:function(){return{pathsOpened:0,pathsClosed:0,state:"GRAPH_DISCOVERY",componentPulseCounts:{}}},shouldPropagate:function(t){return!e.contains(e.keys(this.get("componentPulseCounts")),t.cid)},updatePathCounts:function(e){var t=!1,n=this.get("componentPulseCounts");if("GRAPH_DISCOVERY"==this.get("state")){if(this.set("pathsClosed",this.get("pathsClosed")+1),(t=this.shouldPropagate(e))?(this.setOpenPathCountBasedOnComponentOutputs(e),n[e.cid]=1):n[e.cid]=n[e.cid]+1,this.get("pathsClosed")===this.get("pathsOpened")){this.set("state","RECALCULATION");var o=this.get("startPoint");"function"==typeof o.processIncomingChange?o.processIncomingChange(this):o.trigger("pulse",this)}}else"RECALCULATION"==this.get("state")&&(n[e.cid]=n[e.cid]-1,0===n[e.cid]&&(t=!0));return t},setOpenPathCountBasedOnComponentOutputs:function(t){var n=0;e.each(t.outputs,function(t){"object"==typeof t._events&&e.isArray(t._events.pulse)&&(n+=t._events.pulse.length)}),this.set("pathsOpened",this.get("pathsOpened")+n)},cancel:function(){this.set("state","CANCELLED")},initialize:function(t){if(e.bindAll(this,"cancel","updatePathCounts","shouldPropagate","setOpenPathCountBasedOnComponentOutputs"),!t||!t.startPoint)throw new Error("Pulse must be initialized with a starting Input, Output, or Component");"Input"===t.startPoint.modelType&&this.set("pathsOpened",1)}})}),define("dataFlow/core_IOModels",["underscore","backbone","dataFlow/dataTree","dataFlow/enums","dataFlow/pulse"],function(e,t,n,o,i){var r=t.Model.extend({defaults:function(){return{persistedData:new n,invisible:!1}},initialize:function(t){var i=e.extend(t||{},{});if(e.isUndefined(i.type))throw new Error("No type specified for Output");if(!e.has(e.values(o.OUTPUT_TYPES),i.type))throw new Error("Invalid Output Type Specified: "+i.type);if(e.isUndefined(i.shortName))throw new Error("No shortName specified for Output");this.required=!!e.isUndefined(i.required)||i.required,this.type=i.type,this.default=e.isUndefined(i.default)?null:i.default,this.containsNewData=!!e.isUndefined(i.containsNewData),this.shortName=i.shortName,this.values=new n([]),this.desc=i.desc,e.isUndefined(i.invisible)||this.set({invisible:i.invisible});var r=o.INTERPRET_AS.ITEM;if(e.isUndefined(i.interpretAs)||(e.has(e.keys(o.INTERPRET_AS),i.interpretAs)?r=i.interpretAs:console.warn("Invalid list interpretation type passed to an input. Using default ITEM interpretation. See ENUMS.INTERPRET_AS")),this.interpretAs=r,this.isMaster=i.isMaster,!e.isUndefined(i.persistedData)){var a=new n;a.fromJSON(i.persistedData),this.assignPersistedData(a)}"function"==typeof this._initialize&&this._initialize()},replaceData:function(e){if("DataTree"!==e.objectType)throw new Error("Attempt to replace Data Tree with something that's not a Data Tree.");this.clearValues(),this.values=e},assignPersistedData:function(e){throw new Error("Cannot call assignPersistedData() on base io class")},getTree:function(){if(this.hasConnectedOutputs())return this.applyTreeTransform(this.values);if(e.isUndefined(this.get("persistedData"))||this.get("persistedData").isEmpty()){if(e.isNull(this.default))return new n;var t=new n;return t.setDataAtPath([this.default],[0]),t}return this.applyTreeTransform(this.get("persistedData"))},applyTreeTransform:function(e){return e.copy()},getDefaultValue:function(){return console.warn("getDefaultValue() is deprecated. Use getTree() instead, but assume that the default value will appear inside a data tree."),this.default},getFirstValueOrDefault:function(){return this.getTree().dataAtPath([0])[0]},clearValues:function(){"Output"===this.modelType&&!0===this.containsNewData&&this.values.recurseTree(function(t,n){e.each(t,function(t){e.isEmpty(t)||"function"!=typeof t.destroy?e.isEmpty(t)||e.isNumber(t)||e.isArray(t)||console.warn("Can't destroy object type: "+typeof t+" / constructor: "+t.constructor.name):t.destroy()}),n.data=[]}),this.values=new n},_destroy:function(){this.disconnectAll(),this.stopListening()},toJSON:function(){var t={shortName:this.shortName,desc:this.desc,default:this.default,required:this.required,interpretAs:this.interpretAs,id:this.id||this.cid,connections:e.map(this._listeningTo,function(e){return e.id||e.cid}),type:this.type};return e.isUndefined(this.get("persistedData"))||this.get("persistedData").isEmpty()||(t.persistedData=this.get("persistedData").toJSON()),t}}),a=r.extend({modelType:"Input",validateOutput:function(e){var t=o.OUTPUT_TYPES.WILD;if(this.type!==e.type&&this.type!==t&&e.type!==t)throw new Error("Incongruent output connected to an input");return!0},connectOutput:function(e){this.disconnectAll(!0);try{this.connectAdditionalOutput(e,!1)}catch(e){this.trigger("pulse",new i({startPoint:this})),console.warn("Caught an error during connection: ",e.message,e.stack)}},disconnectOutput:function(e,t){this.stopListening(e),this.trigger("disconnectedOutput",e),!0!==t&&this.trigger("pulse",new i({startPoint:this}))},disconnectAll:function(t){var n=this;e.each(e.clone(this._listeningTo),function(e){n.disconnectOutput.call(n,e,!0)}),!0!==t&&(this.trigger("pulse",new i({startPoint:this})),this.trigger("disconnectAll",this))},processIncomingChange:function(t){var n=!1,o=t||new i({startPoint:this}),r=this;"RECALCULATION"===o.get("state")&&e.each(this._listeningTo,function(e){!1===n?(r.values=e.getTree().copy(),n=!0):e.getTree().recurseTree(function(e,t){var n=t.getPath(),o=r.values.dataAtPath(n).concat(e);r.values.setDataAtPath(o,n)})}),this.trigger("pulse",o)},connectAdditionalOutput:function(t,n){!1!==n&&this.validateOutput(t);var o=this;e.each(this._listeningTo,function(e){t===e&&o.disconnectOutput.call(o,e)}),this.listenTo(t,"pulse",function(e){o.processIncomingChange.call(o,e)}),this.listenTo(t,"disconnectAll",function(e){o.disconnectOutput.call(o,e)}),this.trigger("connectedOutput",t),this.processIncomingChange()},assignPersistedData:function(t){var o=t;e.isArray(t)&&(o=new n).setDataAtPath(t,[0]),this.set("persistedData",o),this.trigger("pulse",new i({startPoint:this}))},hasConnectedOutputs:function(){return!(0===e.keys(this._listeningTo).length)},destroy:function(){this._destroy()}});return{Output:r.extend({_initialize:function(){},modelType:"Output",destroy:function(){this.clearValues(),this._destroy()},disconnectAll:function(){this.trigger("disconnectAll",this)},assignPersistedData:function(e){this.set("persistedData",e),this.trigger("pulse",new i({startPoint:this}))},hasConnectedOutputs:function(){return!0}}),Input:a}}),define("dataFlow/dataMatcher",["underscore","dataFlow/dataTree","dataFlow/enums"],function(e,t,n){function o(o,r,a,s,l){var c=new t,p=e.isObject(s)?e.keys(s):void 0,d=!1,u=[],h=e.indexOf(o,r);e.each(o,function(e){u.push(function(e){var t=[],o=e.getTree().copy();return e.interpretAs===n.INTERPRET_AS.LIST&&(e.isMaster&&(d=!0),e.getTree().recurseTree(function(e,t){o.setDataAtPath([e],t.getPath())})),o.recurseTree(function(e,n){t.push(n)}),t}(e))}),u=i(u);for(var m=[],f=!1,b=0;b<u[0].length;b++){var g,y,T=[];!0===f||e.isEqual(u[h][b].getPath(),m)?(m=y=function(e){var t=e.slice(0);return t[t.length-1]=t[t.length-1]+1,t}(m),f=!0):m=y=u[h][b].getPath();for(var v=0;v<u.length;v++)T.push(u[v][b].data);T=i(T);try{g=function(t,n){for(var o=[],i=0;i<t[0].length;i++){var r=e.map(t,function(e){return e[i]});o[i]=n.apply(this,r)}return o}(T,a)}catch(e){g=null,l.push(e.stack)}c.setDataAtPath(g,y)}return d&&s[p[0]].interpretAs!==n.INTERPRET_AS.LIST&&c.copy().recurseTree(function(e,t){c.setDataAtPath(e[0],t.getPath())}),e.each(s,function(e,t){e.replaceData(c.map(function(e){return e[t]}))}),c}function i(t){var n=[],o=e.max(e.map(t,function(e){return e.length}));return e.each(t,function(e){for(var t=[],i=0;i<o;)i<e.length?t[i]=e[i]:t[i]=t[i-1],i++;n.push(t)}),n}return function(t,i,r){if(!e.isFunction(i))throw new Error("DataMatcher requires a calculation function");if(!e.isArray(t))throw new Error("DataMatcher expects an array of inputs");if(!e.isArray(r))throw new Error("'outputs' parameter for dataMatcher must be an array of outputs corresponding to each result generated by .recalculate()");var a={};e.each(r,function(e){a[e.shortName]=e});var s=[],l=function(t){var o;if(e.each(t,function(e){!0===e.isMaster&&(o=e)}),o)return o;var i=e.map(t,function(t){return e.isNull(t.getTree())?1:t.getTree().getMaxPathLength()}),r=e.max(i),a=[];if(e.each(i,function(e,n){e===r&&a.push(t[n])}),1===a.length)return a[0];var s=e.filter(a,function(e){return e.interpretAs===n.INTERPRET_AS.ITEM});if(1===s.length)return s[0];if(0===s.length){var l=e.filter(a,function(e){return e.interpretAs===n.INTERPRET_AS.LIST});return 0===l.length?a[0]:(l.length,l[0])}return s[0]}(t);return{errors:s,tree:o(t,l,i,a,s),masterInput:l}}}),define("dataFlow/components/engine",[],function(){return new function(){this.setupComplete=!1,this.Jupyter=null,this.executionQueue=[],this.transcript="";var e=this,t="import numpy as np\nimport pandas as pd\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\n%matplotlib inline\n";this.resetTranscript=function(){e.transcript=t},this.getTranscript=function(){var t=e.transcript.match(/# (GET|POST|DELETE|PUT) \/.*\n/g);return t&&(e.transcript=t[0]+e.transcript),e.transcript},this.setup=function(n){e.Jupyter=n,e.execute(t,{success:function(){console.log("Python Engine Successfully Initialized"),e.setupComplete=!0,e.executionQueue.length>0&&e._executeNext()},error:function(e){throw console.error("ERROR IMPORTING REQUIRED PYTHON LIBRARIES."),new Error(e)}},{force:!0})},this._executeNext=function(){console.warn("EXECUTE NEXT IS PROBABLY BROKEN. IT HAS NOT BEEN TESTED YET");var t=e.executionQueue.shift();e.execute.apply(this,t)},this.execute=function(t,n,o){var i=n.statusSet||function(){},r=n.success||function(){},a=n.error||function(){},s=n.setOutput||function(){},l=o&&!0===o.force;e.setupComplete||!0===l?(i("RUNNING"),console.log("Executing Python: ",t),e.transcript+=t,Jupyter.notebook.kernel.execute(t,{shell:{reply:function(e){"ok"===e.content.status?(i("DONE"),r(e.content)):"error"===e.content.status&&(i("ERROR"),a(e.content))}},iopub:{output:function(e){s(e.content)}}},{silent:!1,store_history:!1,stop_on_error:!1})):e.executionQueue.push(arguments)}}}),define("dataFlow/freezeCalculations",[],function(){var e=!1;return{setFrozen:function(t){e=t},getFrozen:function(){return e}}}),define("dataFlow/core_ComponentModel",["underscore","backbone","dataFlow/core_IOModels","dataFlow/pulse","dataFlow/enums","dataFlow/dataMatcher","dataFlow/components/engine","dataFlow/freezeCalculations"],function(e,t,n,o,i,r,a,s){return t.Model.extend({modelType:"Component",initialize:function(){var e="function"==typeof this.recalculateTrees,t="function"==typeof this.recalculate;if(!e&&!t||e&&t)throw new Error(this.get("componentPrettyName")+" needs either .recalculate() or .recalculateTrees(), but not both!");this.base_init.apply(this,arguments)},createIObjectsFromJSON:function(t,o,i){var r=[],a=(i="output"===i?"outputs":i,{outputs:n.Output,inputs:n.Input}),s=this,l=e.isUndefined(o)?{}:e.isUndefined(o[i])?{}:o[i];return e.each(e.values(t),function(t){var n=e.findWhere(l,{shortName:t.shortName});e.isEmpty(n)||n.type===t.type||console.warn("Datatype mismatch between persisted datatype and "+s.componentName+" definition. This indicates a namespace collision, or a change to a component's definition after it was used to persist data. Saved connections to this component may fail!");var o=new a[i](e.extend(n||{},t));r.push(o)}),r},base_init:function(t){if(e.isUndefined(t)||e.isUndefined(t.inputs)||e.isUndefined(t.output)&&e.isUndefined(t.outputs))throw new Error("Insufficient specifications for a Component");this._sufficient=!1,e.bindAll(this,"_handleInputChange","_propagatePulse","recalculate","getOutputVariableName","validatePythonTemplate"),this.outputs=this.initializeOutputs(e.isUndefined(t.outputs)?[t.output]:t.outputs),this.inputs=this.initializeInputs(t.inputs),this.position=t.position||{x:0,y:0},this.set("componentPrettyName",t.componentPrettyName),this.set("preview",t.preview||!1),this.set("pythonTemplate",t.pythonTemplate),t.pythonTemplate&&(this.validatePythonTemplate(t.pythonTemplate),this.pythonTemplateFn=e.template(t.pythonTemplate),e.bindAll(this,"pythonTemplateFn")),this.previews=[],this.on("change:preview",function(){this.clearPreviews(),!0===this.get("preview")&&this.drawPreviews()})},validatePythonTemplate:function(){var t=[],n=this;e.each(this.inputs,function(e){t.push("IN_"+e.shortName)}),t.push("RESULT"),e.each(t,function(e){if(n.get("pythonTemplate").indexOf(e)<0)throw new Error("Component is badly coded. Its inputs and outputs are not referenced by its python template, so they'll never be used.")})},getOutputVariableName:function(){var t=this.get("componentPrettyName");return t.length<1&&(t=this.componentName),t+="_",e.uniqueId(t.toLowerCase().replace(/[^a-z]/g,"_"))},initializeOutputs:function(t){var n=this;return e.each(t,function(e){n.on("pulse",function(t){e.trigger("pulse",t)})}),t},initializeInputs:function(t){var n=this;return e.each(t,function(e){n[e.shortName]=e,n.listenTo(e,"pulse",n._propagatePulse)}),t},_propagatePulse:function(e){if("GRAPH_DISCOVERY"===e.get("state"))e.updatePathCounts(this)&&this.trigger("pulse",e);else if("RECALCULATION"===e.get("state")){e.updatePathCounts(this)&&(this._handleInputChange(),this.trigger("pulse",e))}},assignInput:function(t,n){if(e.isUndefined(t)||e.isUndefined(n))throw new Error("Unspecified Input");if(!e.has(this,t))throw new Error("Tried to specify an input that does not exist");if(this[t].type!==n.type)throw new Error("Tried to specify an input of the wrong type");this[t].connectOutput(n)},getOutput:function(t){return t&&1!==this.outputs.length?e.findWhere(this.outputs,{shortName:t}):this.outputs[0]},getInput:function(t){return e.findWhere(this.inputs,{shortName:t})},destroy:function(){e.each(this.outputs,function(e){e.destroy()}),this.trigger("removed",this),e.each(this.inputs,function(e){e.destroy()}),this.off(),this.stopListening(),delete this.inputs,delete this.outputs},_windowFrozenWarnOnce:e.throttle(function(){console.warn("WINDOW FROZEN. CALCULATION SKIPPED.")},5e3),_handleInputChange:function(){if(!0===s.getFrozen())return this._windowFrozenWarnOnce();var t=!e.every(this.inputs,function(e){return!0!==e.getTree().isEmpty()});if(this.set({sufficient:!t}),this.errors=[],!t)if(this.simulatedRecalculate(),"function"==typeof this.recalculateTrees)this.recalculateTrees();else{var n=r(this.inputs,this.recalculate,this.outputs);n.errors.length>0&&(this.set({sufficient:"error"}),console.log(n.errors))}!0===this.get("preview")&&(t?this.clearPreviews():this.drawPreviews()),t&&this.clear(!1)},clear:function(t){if(e.each(this.outputs,function(e){e.clearValues()}),!0===t){var n=new o({startPoint:this,pathsOpened:1});this.trigger("pulse",n)}},isNull:function(){return e.every(this.outputs,function(e){return e.getTree().isEmpty()})},recalculate:function(){var t=this,n=[],o=e.map(arguments,function(t){var o=e.isArray(t);return o?e.each(t,function(e){n.push(e)}):n.push(t),o?t.length:0});n=e.map(n,function(e){return"string"==typeof e?'"'+e+'"':e});var i=Promise.all(n).then(function(t){return new Promise(function(n,i){var r=[];e.each(o,function(e){0===e?r.push(t.shift()):(r.push(t.slice(0,e)),t=t.slice(e))}),n(r)})}).then(function(){var n=arguments[0];return new Promise(function(o,i){var r=t.getOutputVariableName(),s={RESULT:r};e.each(t.inputs,function(e,t){s["IN_"+e.shortName]=n[t]});var l=t.pythonTemplateFn(s);a.execute(l,{statusSet:function(e){},success:function(){o(r)},error:function(e){i(e)},setOutput:function(e){}})})}),r={};return 1===this.outputs.length?r[this.outputs[0].shortName]=i.catch(function(e){t.set({sufficient:"error"})}):e.each(this.outputs,function(e,n){r[e.shortName]=i.catch(function(e){t.set({sufficient:"error"})}).then(function(e){return new Promise(function(t){return t(e+"["+n+"]")})})}),i.catch(function(e){t.errors.push({type:e.ename,message:e.evalue}),t.set({sufficient:"error"})}),r},simulatedRecalculate:function(){},fetchOutputs:function(){return this.getOutput().getTree().flattenedTree().dataAtPath([0])},getPreviewOutputs:function(){return[this.getOutput()]},drawPreviews:function(){var t=this.getGeometry(),n=this.getPreviewOutputs()[0].type,o={};if(o[i.OUTPUT_TYPES.CURVE]="CurveListPreview",o[i.OUTPUT_TYPES.POINT]="PointListPreview",n===i.OUTPUT_TYPES.WILD&&(t[0].constructor===Geometry.Curve?(n=i.OUTPUT_TYPES.CURVE,t=e.filter(t,function(e){return e.constructor===Geometry.Curve})):t[0].constructor===Geometry.Point&&(n=i.OUTPUT_TYPES.POINT,t=e.filter(t,function(e){return e.constructor===Geometry.Point}))),this.previews[0]&&this.previews[0].constructor===Preview[o[n]])this.previews[0].updateGeometry(t);else{console.warn("New preview type mismatches previous preview type. Destroy old previews?");var r=Preview[o[n]];"function"==typeof r&&(this.previews[0]=new r(t))}},exportGeometry:function(t){if(!e.contains(["SVG"],t))throw new Error("Unrecognized export type: "+t);this.trigger("requestFileExport",{type:t,geometry:this.getGeometry()})},getGeometry:function(){var e=this.getPreviewOutputs(),t=e[0].getTree().flattenedTree().dataAtPath([0]);if(e.length>1)for(var n=1;n<e.length;n++)t=t.concat(e[n].getTree().flattenedTree().dataAtPath([0]));return t},destroyPreviews:function(){this.clearPreviews(),this.previews.splice(0,this.previews.length)},clearPreviews:function(){e.each(this.previews,function(e){e.hide()})},toJSON:function(){var t=[],n=[];return e.each(this.inputs,function(e){t.push(e.toJSON())}),e.each(this.outputs,function(e){n.push(e.toJSON())}),{componentPrettyName:this.attributes.componentPrettyName,componentName:this.componentName,position:this.position,preview:this.attributes.preview,inputs:t,outputs:n,id:this.id||this.cid}}})}),define("dataFlow/core",["dataFlow/core_IOModels","dataFlow/core_ComponentModel","dataFlow/enums","dataFlow/pulse"],function(e,t,n,o){var i={};return i.OUTPUT_TYPES=n.OUTPUT_TYPES,i.INTERPRET_AS=n.INTERPRET_AS,i.Output=e.Output,i.Input=e.Input,i.Component=t,i.Pulse=o,i}),define("dataFlow/components/outputComponents",["underscore","dataFlow/core","dataFlow/dataTree","dataFlow/dataMatcher","dataFlow/components/engine"],function(e,t,n,o,i){var r={};return r.PrintComponent=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"D",type:t.OUTPUT_TYPES.WILD,desc:"Data to be viewed"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"D",type:t.OUTPUT_TYPES.WILD,invisible:!0}],n,"output"),r=e.extend({componentPrettyName:"Print"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = print(<%= IN_D %>)\n"});this.base_init(r)},recalculate:function(){var t=this,n=Promise.all(arguments).then(function(){var n=arguments[0];return new Promise(function(o,r){var a={RESULT:t.getOutputVariableName()};e.each(t.inputs,function(e,t){a["IN_"+e.shortName]=n[t]});var s=t.pythonTemplateFn(a);i.execute(s,{statusSet:function(e){},success:function(){},error:function(e){console.log("python status ERROR: ",e),r()},setOutput:function(e){t.getOutput("D").trigger("change"),o(e)}})})}).catch(function(e){console.warn("Some inputs resolved as errors. This behavior should be defined... it can either 'show what we have' or error out, in which case prior data should be cleared.")}),o={};return 1===this.outputs.length?o[this.outputs[0].shortName]=n:e.each(this.outputs,function(e,t){o[e.shortName]=n.then(function(e){return new Promise(function(n){return n(e+"["+t+"]")})})}),o}},{label:"Print",desc:"View the value of a variable"}),r.LinePlot=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"X",type:t.OUTPUT_TYPES.NUMPY_ARR,desc:"X-Axis Values",interpretAs:t.INTERPRET_AS.LIST},{required:!0,shortName:"Y",type:t.OUTPUT_TYPES.NUMPY_ARR,desc:"Y-Axis Values",interpretAs:t.INTERPRET_AS.LIST}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"P",type:t.OUTPUT_TYPES.WILD,invisible:!0}],n,"output"),r=e.extend({componentPrettyName:"LinePlot"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = plt.figure()\n<% _.each(IN_X , function(x,index) { %>plt.plot(<%= x %>, <%= IN_Y[index] %>)\n<% }) %>"});this.base_init(r)},recalculate:function(){var t=this,n=Promise.all(arguments).then(function(e){var t=Promise.all(e[0]),n=Promise.all(e[1]);return new Promise(function(e,o){var i;t.then(function(e){return i=e,n}).then(function(t){for(;i.length<t.length;)i.push(i[i.length-1]);e({x:i,y:t})})})}).then(function(n){var o=[n.x,n.y];return new Promise(function(n,r){var a=[],s={RESULT:t.getOutputVariableName()};e.each(t.inputs,function(e,t){s["IN_"+e.shortName]=o[t]});var l=t.pythonTemplateFn(s);i.execute(l,{statusSet:function(e){},error:function(e){console.log("python status ERROR: ",e),r()},success:function(e){t.getOutput("P").trigger("change"),n(a)},setOutput:function(e){e.data&&e.data["image/png"]&&a.push(e.data["image/png"])}})})}).catch(function(e){console.warn("Some inputs resolved as errors. This behavior should be defined... it can either 'show what we have' or error out, in which case prior data should be cleared.")}),o={};return 1===this.outputs.length?o[this.outputs[0].shortName]=n:e.each(this.outputs,function(e,t){o[e.shortName]=n.then(function(e){return new Promise(function(n){return n(e+"["+t+"]")})})}),o}},{label:"Line Plot",desc:"Plot two variables against each other using connecting lines"}),r.ExportPythonVariable=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"D",type:t.OUTPUT_TYPES.WILD,desc:"Data for export"},{required:!0,shortName:"N",type:t.OUTPUT_TYPES.STRING,desc:"Variable Names"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"P",type:t.OUTPUT_TYPES.WILD,invisible:!0}],n,"output"),r=e.extend({componentPrettyName:"Export Vars"},n||{},{inputs:o,outputs:i,pythonTemplate:"<% print(IN_N.replace(/[\"]+/g, '')); %> = <%= IN_D %> #<%= RESULT %>\n"});this.base_init(r)}},{label:"Export a variable for use in your Jupyter Document",desc:"Makes a Python object available in the Jupyter Context"}),r.ExportCSVFile=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"D",type:t.OUTPUT_TYPES.DATAFRAME,desc:"Dataframe for export"},{required:!0,shortName:"P",type:t.OUTPUT_TYPES.STRING,desc:"Output path (use absolute paths)"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"P",type:t.OUTPUT_TYPES.WILD,invisible:!0}],n,"output"),r=e.extend({componentPrettyName:"Export CSV"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = <%= IN_D %>.to_csv(<%= IN_P %>)\n"});this.base_init(r)}},{label:"Export a Dataframe as a CSV File",desc:"Serialize a Pandas Dataframe into CSV format, and save the file to a local path on your computer"}),r.ExposeAPIEndpoint=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"E",type:t.OUTPUT_TYPES.STRING,desc:"Endpoint Name"},{required:!0,shortName:"A",type:t.OUTPUT_TYPES.STRING,desc:"Arguments for endpoint",interpretAs:t.INTERPRET_AS.LIST},{required:!1,default:"",shortName:"T",type:t.OUTPUT_TYPES.STRING,desc:"Argument Test Values",interpretAs:t.INTERPRET_AS.LIST}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"A",type:t.OUTPUT_TYPES.STRING,desc:"Argument Values"}],n,"output"),r=e.extend({componentPrettyName:"API"},n||{},{inputs:o,outputs:i,pythonTemplate:"# GET /<% print(IN_E.replace(/[\"]+/g, '')); %>\nimport json\ntry:\n  req = json.loads(REQUEST)\n  args = req['args']\n  <%= RESULT %> = (<% _.each(IN_A , function(argVariable,idx) { %>  <% if (idx != 0) { print(','); } %>  args[<%= argVariable %>][0]  <% }) %>)\nexcept:\n  <%= RESULT %> = (<% _.each(IN_A , function(argVariable,idx) { %>  <% if (idx != 0) { print(','); } %>  <% if (IN_T[idx] && typeof IN_T[idx] == 'string' && IN_T[idx].length > 2) { %><%= IN_T[idx] %> <% }  else { print(argVariable); } %>  <% }) %>)\n"});this.base_init(r)}},{label:"Expose this Orchestra Definition as an API via Jupyter Kernel Gateway",desc:"Create a web microservice based on your Jupyter definition. Accept inputs using this component, and include a single 'print' component to send output to the response."}),r.SpreadsheetComponent=r.PrintComponent.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"D",type:t.OUTPUT_TYPES.DATAFRAME,desc:"Dataframe for viewing"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"D",type:t.OUTPUT_TYPES.WILD,invisible:!0}],n,"output"),r=e.extend({componentPrettyName:"Spreadsheet"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = print(<%= IN_D %>.to_json())\n"});this.base_init(r)}},{label:"View a Pandas Dataframe in a Spreadsheet",desc:"To conveniently view a whole dataframe in the browser, regardless of size, plug it into this component and single-click the component."}),r}),define("dataFlow/components/number",["underscore","dataFlow/core","dataFlow/dataTree","dataFlow/dataMatcher"],function(e,t,n,o){var i={};return i.NumberComponent=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{shortName:"N",type:t.OUTPUT_TYPES.NUMBER}],n,"output"),i=this.createIObjectsFromJSON([{required:!1,shortName:"N",type:t.OUTPUT_TYPES.NUMBER}],n,"inputs"),r=e.extend({componentPrettyName:"Number"},n||{},{inputs:i,outputs:o,pythonTemplate:"<%= RESULT %> = <%= IN_N %>\n"});this.base_init(r)}},{label:"Number",desc:"Holds a list of numbers. For short lists, you can enter the numbers directly into the component"}),i.SeriesComponent=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{shortName:"S",type:t.OUTPUT_TYPES.NUMBER,desc:"Series"}],n,"output"),i=this.createIObjectsFromJSON([{shortName:"S",required:!1,default:0,type:t.OUTPUT_TYPES.NUMBER,desc:"First number in series"},{shortName:"N",required:!1,default:1,type:t.OUTPUT_TYPES.NUMBER,desc:"Step size"},{shortName:"C",required:!1,default:10,type:t.OUTPUT_TYPES.NUMBER,desc:"Count of numbers in series"}],n,"inputs"),r=e.extend({componentPrettyName:"Series",preview:!1},n||{},{inputs:i,outputs:o});this.base_init(r),this.recalculate()},recalculate:function(e,t,n){for(var o=[],i=0;i<n;)o.push(e+t*i),i++;return{S:o}}},{label:"Series",desc:"Generates a list of numbers. You can control the start of the list, the increment, and the number of values"}),i.SliderComponent=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{shortName:"N",type:t.OUTPUT_TYPES.NUMBER,desc:"Value"}],n,"output"),i=this.createIObjectsFromJSON([{shortName:"S",required:!1,default:0,type:t.OUTPUT_TYPES.NUMBER,desc:"Start"},{shortName:"E",required:!1,default:1,type:t.OUTPUT_TYPES.NUMBER,desc:"End"},{shortName:"I",required:!1,default:!1,type:t.OUTPUT_TYPES.BOOLEAN,desc:"Integers"},{shortName:"N",required:!1,default:.5,type:t.OUTPUT_TYPES.NUMBER,invisible:!0,desc:"Value"}],n,"inputs"),r=e.extend({componentPrettyName:"Slider",preview:!1},n||{},{inputs:i,outputs:o});this.base_init(r)},storeUserData:function(e){var t=new n;t.setDataAtPath([e],[0]),this.getInput("N").assignPersistedData(t)},recalculateTrees:function(){var e=this.getInput("N").getFirstValueOrDefault(),t=this.getInput("S").getFirstValueOrDefault(),n=this.getInput("E").getFirstValueOrDefault();!0===this.getInput("I").getFirstValueOrDefault()&&Math.floor(e)!=e&&(e=Math.floor(e)),e>n&&(e=n),e<t&&(e=t),this.getOutput("N").values.setDataAtPath([e],[0])}},{label:"Slider",desc:"A convenient way to change numerical values on the fly. Shows a touch/mouse-enabled slider"}),i}),define("dataFlow/components/simplemath",["underscore","dataFlow/core","dataFlow/dataTree","dataFlow/dataMatcher"],function(e,t,n,o){var i={};return i.NumberAdditionComponent=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"A",type:t.OUTPUT_TYPES.NUMBER},{required:!0,shortName:"B",type:t.OUTPUT_TYPES.NUMBER}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"N",type:t.OUTPUT_TYPES.NUMBER}],n,"output"),r=e.extend({componentPrettyName:"Number Addition"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = <%= IN_A %> + <%= IN_B %>\n"});this.base_init(r)}},{label:"Add",desc:"Add two numbers together"}),i.NumberSubtractComponent=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"A",type:t.OUTPUT_TYPES.NUMBER},{required:!0,shortName:"B",type:t.OUTPUT_TYPES.NUMBER}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"N",type:t.OUTPUT_TYPES.NUMBER}],n,"output"),r=e.extend({componentPrettyName:"Number Subtraction"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = <%= IN_A %> - <%= IN_B %>\n"});this.base_init(r)}},{label:"Subtract",desc:"Subtract A - B"}),i}),define("dataFlow/components/treeComponents",["underscore","dataFlow/core","dataFlow/dataMatcher"],function(e,t,n){var o={};return o.GraftComponent=t.Component.extend({initialize:function(n){this.base_init(e.extend({preview:!1,componentPrettyName:"Graft"},n||{},{inputs:this.createIObjectsFromJSON([{required:!0,shortName:"T",type:t.OUTPUT_TYPES.WILD}],n,"inputs"),outputs:this.createIObjectsFromJSON([{shortName:"T",type:t.OUTPUT_TYPES.WILD,containsNewData:!1}],n,"output")}))},recalculateTrees:function(){this.getOutput("T").replaceData(this.getInput("T").getTree().graftedTree())}},{label:"Graft Tree",desc:"Creates a separate branch for each data item in the supplied tree"}),o.ShiftComponent=t.Component.extend({initialize:function(n){this.base_init(e.extend({preview:!1,componentPrettyName:"Shift"},n||{},{inputs:this.createIObjectsFromJSON([{required:!0,shortName:"L",type:t.OUTPUT_TYPES.WILD,interpretAs:t.INTERPRET_AS.LIST,isMaster:!0},{required:!1,shortName:"S",default:1,type:t.OUTPUT_TYPES.NUMBER},{required:!1,shortName:"W",default:!0,type:t.OUTPUT_TYPES.BOOLEAN}],n,"inputs"),outputs:this.createIObjectsFromJSON([{shortName:"L",type:t.OUTPUT_TYPES.WILD,containsNewData:!1,interpretAs:t.INTERPRET_AS.LIST}],n,"output")}))},recalculate:function(e,t,n){var o=e.slice(t);return n&&(o=o.concat(e.slice(0,t))),{L:o}}},{label:"Shift List",desc:"Removes items from the beginning of a data list, and optionally tacks them back onto the end"}),o.CullIndexComponent=t.Component.extend({initialize:function(n){this.base_init(e.extend({preview:!1,componentPrettyName:"Cull i"},n||{},{inputs:this.createIObjectsFromJSON([{required:!0,shortName:"L",type:t.OUTPUT_TYPES.WILD,interpretAs:t.INTERPRET_AS.LIST,isMaster:!0,desc:"List to Cull"},{required:!0,shortName:"i",type:t.OUTPUT_TYPES.NUMBER,interpretAs:t.INTERPRET_AS.LIST,desc:"Culling indices"},{required:!1,shortName:"W",default:!0,type:t.OUTPUT_TYPES.BOOLEAN,desc:"Wrap indices to list range"}],n,"inputs"),outputs:output=this.createIObjectsFromJSON([{shortName:"L",type:t.OUTPUT_TYPES.WILD,containsNewData:!1,interpretAs:t.INTERPRET_AS.LIST}],n,"output")}))},recalculate:function(t,n,o){var i=[];return e.each(t,function(t,o){e.contains(n,o)||i.push(t)}),{L:i}}},{label:"Cull Index",desc:"Cull (remove) indexed elements from a list"}),o.CullPatternComponent=t.Component.extend({initialize:function(n){this.base_init(e.extend({preview:!1,componentPrettyName:"Cull"},n||{},{inputs:this.createIObjectsFromJSON([{required:!0,shortName:"L",type:t.OUTPUT_TYPES.WILD,interpretAs:t.INTERPRET_AS.LIST,isMaster:!0,desc:"List to Cull"},{required:!0,shortName:"P",type:t.OUTPUT_TYPES.BOOLEAN,interpretAs:t.INTERPRET_AS.LIST,desc:"Culling pattern"}],n,"inputs"),outputs:output=this.createIObjectsFromJSON([{shortName:"L",type:t.OUTPUT_TYPES.WILD,containsNewData:!1,interpretAs:t.INTERPRET_AS.LIST}],n,"output")}))},recalculate:function(t,n){var o=n.length;return{L:e.filter(t,function(e,t){return n[t%o]})}}},{label:"Cull Pattern",desc:"Cull (remove) indexed elements from a list using a repeating bit mask"}),o.CullFrequencyComponent=t.Component.extend({initialize:function(n){this.base_init(e.extend({componentPrettyName:"CullN",preview:!1},n||{},{inputs:this.createIObjectsFromJSON([{required:!0,shortName:"L",type:t.OUTPUT_TYPES.WILD,interpretAs:t.INTERPRET_AS.LIST,isMaster:!0,desc:"List to Cull"},{required:!1,default:2,shortName:"N",type:t.OUTPUT_TYPES.NUMBER,desc:"Cull frequency"}],n,"inputs"),outputs:output=this.createIObjectsFromJSON([{shortName:"L",type:t.OUTPUT_TYPES.WILD,containsNewData:!1,interpretAs:t.INTERPRET_AS.LIST}],n,"output")}))},recalculate:function(t,n){return{L:e.filter(t,function(e,t){return(t+1)%n!=0})}}},{label:"Cull Nth",desc:"Cull (remove) every Nth element in a list"}),o.InsertItemsComponent=t.Component.extend({initialize:function(n){this.base_init(e.extend({preview:!1,componentPrettyName:"Ins"},n||{},{inputs:this.createIObjectsFromJSON([{required:!0,shortName:"L",type:t.OUTPUT_TYPES.WILD,interpretAs:t.INTERPRET_AS.LIST,isMaster:!0,desc:"List to modify"},{required:!0,shortName:"I",type:t.OUTPUT_TYPES.WILD,interpretAs:t.INTERPRET_AS.LIST,isMaster:!0,desc:"Items to insert. If no items are supplied, nulls will be inserted"},{required:!0,shortName:"i",type:t.OUTPUT_TYPES.NUMBER,interpretAs:t.INTERPRET_AS.LIST,desc:"Insertion index for each item"},{required:!1,shortName:"W",default:!0,type:t.OUTPUT_TYPES.BOOLEAN,desc:"If true, indices will be wrapped"}],n,"inputs"),outputs:output=this.createIObjectsFromJSON([{shortName:"L",type:t.OUTPUT_TYPES.WILD,containsNewData:!1,interpretAs:t.INTERPRET_AS.LIST}],n,"output")}))},recalculate:function(t,n,o,i){console.warn("TODO: Support 'wrap' option on insert-items component");var r=t.slice(0),a=n.slice(0).reverse();return e.each(o.slice(0).reverse(),function(e,t){r.splice(e,0,a[t])}),{L:r}}},{label:"Insert Items",desc:"Insert a collection of items into a list"}),o.FlattenComponent=t.Component.extend({initialize:function(n){this.base_init(e.extend({preview:!1,componentPrettyName:"Flatten"},n||{},{inputs:this.createIObjectsFromJSON([{required:!0,shortName:"T",type:t.OUTPUT_TYPES.WILD},{required:!1,shortName:"P",default:[0],type:t.OUTPUT_TYPES.ARRAY}],n,"inputs"),outputs:this.createIObjectsFromJSON([{shortName:"T",type:t.OUTPUT_TYPES.WILD,containsNewData:!1}],n,"output")}))},recalculateTrees:function(){console.warn("PATH input is ignored for now");var e=this.getInput("T").getTree().flattenedTree(!1);this.getOutput("T").replaceData(e)}},{label:"Flatten Tree Data",desc:"Flatten a data tree by removing all branching information"}),o.ListItemComponent=t.Component.extend({initialize:function(n){this.base_init(e.extend({preview:!1,componentPrettyName:"Item"},n||{},{inputs:this.createIObjectsFromJSON([{required:!0,shortName:"L",type:t.OUTPUT_TYPES.WILD,interpretAs:t.INTERPRET_AS.LIST},{required:!1,shortName:"i",default:0,type:t.OUTPUT_TYPES.NUMBER},{required:!1,shortName:"W",default:!0,type:t.OUTPUT_TYPES.BOOLEAN}],n,"inputs"),outputs:this.createIObjectsFromJSON([{shortName:"i",type:t.OUTPUT_TYPES.WILD,containsNewData:!1}],n,"output")}))},recalculate:function(t,n,o){return e.isArray(t)?!o&&t.length<=n?null:{i:t[n%t.length]}:null}},{label:"Extract Item from List",desc:"Retrieve a specific item from a list"}),o.DuplicateDataComponent=t.Component.extend({initialize:function(n){this.base_init(e.extend({preview:!1,componentPrettyName:"Dup"},n||{},{inputs:this.createIObjectsFromJSON([{required:!0,shortName:"D",type:t.OUTPUT_TYPES.WILD,interpretAs:t.INTERPRET_AS.LIST},{required:!1,shortName:"N",default:2,type:t.OUTPUT_TYPES.NUMBER},{required:!1,shortName:"O",default:!0,type:t.OUTPUT_TYPES.BOOLEAN}],n,"inputs"),outputs:this.createIObjectsFromJSON([{shortName:"D",type:t.OUTPUT_TYPES.WILD,containsNewData:!1,interpretAs:t.INTERPRET_AS.LIST}],n,"output")}))},recalculate:function(t,n,o){if(!e.isArray(t))return null;console.warn("RETAIN ORDER FALSE NOT SUPPORTED");for(var i=[],r=0;r<n;r++)i=i.concat(t);return{D:i}}},{label:"Duplicate Data",desc:"Duplicate data a predefined number of times"}),o.ListLengthComponent=t.Component.extend({initialize:function(n){this.base_init(e.extend({preview:!1,componentPrettyName:"Lng"},n||{},{inputs:this.createIObjectsFromJSON([{required:!0,shortName:"L",type:t.OUTPUT_TYPES.WILD,interpretAs:t.INTERPRET_AS.LIST}],n,"inputs"),outputs:this.createIObjectsFromJSON([{shortName:"L",type:t.OUTPUT_TYPES.NUMBER}],n,"output")}))},recalculate:function(t){return e.isArray(t)?{L:t.length}:null}},{label:"List Length",desc:"Measure the length of a List"}),o}),define("dataFlow/components/numpy_create",["underscore","dataFlow/core","dataFlow/dataTree","dataFlow/dataMatcher"],function(e,t,n,o){var i={};return i.NumpyZeros=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"C",type:t.OUTPUT_TYPES.NUMBER,desc:"Axis 0 Length"},{required:!1,default:0,shortName:"R",type:t.OUTPUT_TYPES.NUMBER,desc:"Axis 1 Length"},{required:!1,default:0,shortName:"W",type:t.OUTPUT_TYPES.NUMBER,desc:"Axis 2 Length"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"A",type:t.OUTPUT_TYPES.NUMPY_ARR}],n,"output"),r=e.extend({componentPrettyName:"Zeros"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = np.zeros((<%= IN_C %><% if (IN_R) { %>, <%= IN_R %><% } %><% if (IN_W) { %>, <%= IN_W %><% } %> ))\n"});this.base_init(r)}},{label:"Zeros Array",desc:"Create a NumPy Zeros Array, up to 3 dimensions"}),i.NumpyFullNDimensions=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"D",type:t.OUTPUT_TYPES.NUMBER,interpretAs:t.INTERPRET_AS.LIST,desc:"Dimensions of numpy array"},{required:!1,default:0,shortName:"V",type:t.OUTPUT_TYPES.NUMBER,desc:"Value to fill the array with"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"A",type:t.OUTPUT_TYPES.NUMPY_ARR}],n,"output"),r=e.extend({componentPrettyName:"Full N-D Array"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = np.full((<%= IN_D %>), <%= IN_V %>)\n"});this.base_init(r)}},{label:"Full N-Dimensional Array",desc:"Create a full Numpy array of unlimited dimensions"}),i.NumpyFullRandom=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"D",type:t.OUTPUT_TYPES.NUMBER,interpretAs:t.INTERPRET_AS.LIST,desc:"Shape of Numpy Array"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"A",type:t.OUTPUT_TYPES.NUMPY_ARR}],n,"output"),r=e.extend({componentPrettyName:"Random Array"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = np.random.rand(<%= IN_D %>)\n"});this.base_init(r)}},{label:"Create a Numpy Array Full of Random Values",desc:"Create a new Numpy Array (of shape specified) full of random values"}),i.NumpyFull=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"C",type:t.OUTPUT_TYPES.NUMBER,desc:"Axis 0 Length"},{required:!1,default:0,shortName:"R",type:t.OUTPUT_TYPES.NUMBER,desc:"Axis 1 Length"},{required:!1,default:0,shortName:"W",type:t.OUTPUT_TYPES.NUMBER,desc:"Axis 2 Length"},{required:!1,default:0,shortName:"V",type:t.OUTPUT_TYPES.NUMBER,desc:"Value"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"A",type:t.OUTPUT_TYPES.NUMPY_ARR}],n,"output"),r=e.extend({componentPrettyName:"Full"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = np.full((<%= IN_C %><% if (IN_R) { %>, <%= IN_R %><% } %><% if (IN_W) { %>, <%= IN_W %><% } %>), <%= IN_V %>)\n"});this.base_init(r)}},{label:"Full Array",desc:"Create a NumPy Array with every value set to a particular value"}),i.NumpyRange=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!1,default:0,shortName:"S",type:t.OUTPUT_TYPES.NUMBER,desc:"Start"},{required:!1,default:10,shortName:"E",type:t.OUTPUT_TYPES.NUMBER,desc:"End"},{required:!1,default:1,shortName:"C",type:t.OUTPUT_TYPES.NUMBER,desc:"Step"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"A",type:t.OUTPUT_TYPES.NUMPY_ARR}],n,"output"),r=e.extend({componentPrettyName:"Range"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = np.arange(<%= IN_S %>, <%= IN_E %>, <%= IN_C %> )\n"});this.base_init(r)}},{label:"Range",desc:"Create a 1D NumPy Range Array"}),i.NumpyLinspace=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!1,default:0,shortName:"S",type:t.OUTPUT_TYPES.NUMBER,desc:"Start, the array's first value"},{required:!1,default:10,shortName:"E",type:t.OUTPUT_TYPES.NUMBER,desc:"End, the array's last value"},{required:!1,default:1,shortName:"C",type:t.OUTPUT_TYPES.NUMBER,desc:"Count, number of items in the array"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"A",type:t.OUTPUT_TYPES.NUMPY_ARR}],n,"output"),r=e.extend({componentPrettyName:"Linspace"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = np.linspace(<%= IN_S %>, <%= IN_E %>, <%= IN_C %>)\n"});this.base_init(r)}},{label:"Linspace",desc:"Create a 1D NumPy Linear Space as a function of Start, End, and Count of Values"}),i}),define("dataFlow/components/numpy_simplemath",["underscore","dataFlow/core","dataFlow/dataTree","dataFlow/dataMatcher"],function(e,t,n,o){var i={};return i.NumpySin=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"A",type:t.OUTPUT_TYPES.NUMPY_ARR,desc:"Numpy Array"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"A",type:t.OUTPUT_TYPES.NUMPY_ARR}],n,"output"),r=e.extend({componentPrettyName:"sin(A)"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = np.sin(<%= IN_A %>)\n"});this.base_init(r)}},{label:"Numpy Vectorized Sin(x)",desc:"Return a numpy array whose members are the sine of the values of the members of the input array"}),i.NumpyCos=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"A",type:t.OUTPUT_TYPES.NUMPY_ARR,desc:"Numpy Array"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"A",type:t.OUTPUT_TYPES.NUMPY_ARR}],n,"output"),r=e.extend({componentPrettyName:"cos(A)"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = np.cos(<%= IN_A %>)\n"});this.base_init(r)}},{label:"Numpy Vectorized Cos(x)",desc:"Return a numpy array whose members are the cosine of the values of the members of the input array"}),i}),define("dataFlow/components/numpy_basics",["underscore","dataFlow/core","dataFlow/dataTree","dataFlow/dataMatcher"],function(e,t,n,o){var i={};return i.NumpySlice=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"A",type:t.OUTPUT_TYPES.NUMPY_ARR,desc:"Numpy Array to Slice"},{required:!1,default:"null",shortName:"S",type:t.OUTPUT_TYPES.NUMBER,desc:"Start Index of Slice"},{required:!1,default:"null",shortName:"E",type:t.OUTPUT_TYPES.NUMBER,desc:"End Index of Slice"},{required:!1,default:"null",shortName:"N",type:t.OUTPUT_TYPES.NUMBER,desc:"Step"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"A",type:t.OUTPUT_TYPES.NUMPY_ARR}],n,"output"),r=e.extend({componentPrettyName:"1D Sub Array"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = <%= IN_A %>[ <% if (IN_S != 'null'){ %><%= IN_S %><% } %> : <% if (IN_E != 'null'){ %><%= IN_E %><% } %> : <% if (IN_N != 'null'){ %><%= IN_N %><% } %>]\n"});this.base_init(r)}},{label:"Slice a Numpy Array",desc:"Create a slice (sub-array) of a numpy array based on a start index, end index, and number of steps between each index."}),i.NumpyExtractItem=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"A",type:t.OUTPUT_TYPES.NUMPY_ARR,desc:"Numpy Array"},{required:!1,default:0,shortName:"I",type:t.OUTPUT_TYPES.NUMBER,interpretAs:t.INTERPRET_AS.LIST,desc:"Index of Item to Extract, <= Array Dimension"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"A",type:t.OUTPUT_TYPES.NUMPY_ARR},{shortName:"N",type:t.OUTPUT_TYPES.WILD}],n,"output"),r=e.extend({componentPrettyName:"Extract Item"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = (<%= IN_A %>[<%= IN_I %>], <%= IN_A %>[<%= IN_I %>])\n"});this.base_init(r)}},{label:"Extract an Item from a Numpy Array",desc:"Extract an Item from Numpy array using Indexing. Position in a multi-dimensional array can be specified by subsequent items in the 'Index' input, which will be interpreted as a list."}),i.NumpyExtractColumn=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"A",type:t.OUTPUT_TYPES.NUMPY_ARR,desc:"Numpy Array, 2+ Dimensions"},{required:!1,default:0,shortName:"C",type:t.OUTPUT_TYPES.NUMBER,desc:"Index of Column to Extract"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"A",type:t.OUTPUT_TYPES.NUMPY_ARR}],n,"output"),r=e.extend({componentPrettyName:"Extract Column"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = <%= IN_A %>[:,<%= IN_C %>]\n"});this.base_init(r)}},{label:"Extract the first column of a Numpy Array With 2 or more dimensions",desc:"Extract the first column of a Numpy array using a combination of index and slice methods eg, array[:,(column number)]"}),i.NumpyExtractRow=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"A",type:t.OUTPUT_TYPES.NUMPY_ARR,desc:"Numpy Array, 2+ Dimensions"},{required:!1,default:0,shortName:"C",type:t.OUTPUT_TYPES.NUMBER,desc:"Index of Row to Extract"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"A",type:t.OUTPUT_TYPES.NUMPY_ARR}],n,"output"),r=e.extend({componentPrettyName:"Extract Row"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = <%= IN_A %>[<%= IN_C %>,:]\n"});this.base_init(r)}},{label:"Extract the first row of a Numpy Array With 2 or more dimensions",desc:"Extract the first row of a Numpy array using a combination of index and slice methods eg, array[(row number),:]"}),i.NumpyShape=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"A",type:t.OUTPUT_TYPES.NUMPY_ARR,desc:"Numpy Array"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"S",type:t.OUTPUT_TYPES.ARRAY,desc:"Shape"},{shortName:"N",type:t.OUTPUT_TYPES.NUMBER,desc:"Number of Dimensions"},{shortName:"C",type:t.OUTPUT_TYPES.NUMBER,desc:"Size"},{shortName:"D",type:t.OUTPUT_TYPES.STRING,desc:"Data Type"}],n,"output"),r=e.extend({componentPrettyName:"Shape"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = (<%= IN_A %>.shape, <%= IN_A %>.ndim, <%= IN_A %>.size, <%= IN_A %>.dtype)\n"});this.base_init(r)}},{label:"Shape of a Numpy Array",desc:"Retrieve the dimensions and data type of a Numpy Array"}),i}),define("dataFlow/components/dataframe_create",["underscore","dataFlow/core","dataFlow/dataTree","dataFlow/dataMatcher"],function(e,t,n,o){var i={};return i.DataFrameFromCSV=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"L",type:t.OUTPUT_TYPES.STRING,desc:"Location of the source CSV"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"D",type:t.OUTPUT_TYPES.DATAFRAME}],n,"output"),r=e.extend({componentPrettyName:"Read CSV"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = pd.read_csv(<%= IN_L %>)\n"});this.base_init(r)}},{label:"Pandas DataFrame From CSV",desc:"Read a CSV from a local file path or URL. Accepts http, s3, file, and ftp URLs. For file, a host is expected."}),i}),define("dataFlow/components/dataframe_basics",["underscore","dataFlow/core","dataFlow/dataTree","dataFlow/dataMatcher"],function(e,t,n,o){var i={};return i.DataframeExtractColumn=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"D",type:t.OUTPUT_TYPES.DATAFRAME,desc:"Dataframe from which columns should be selected"},{required:!0,shortName:"I",type:t.OUTPUT_TYPES.STRING,desc:"Indexes of Column to Extract",interpretAs:t.INTERPRET_AS.LIST}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"D",type:t.OUTPUT_TYPES.DATAFRAME}],n,"output"),r=e.extend({componentPrettyName:"Extract Columns"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = <%= IN_D %>[[<%= IN_I %>]]\n"});this.base_init(r)}},{label:"Extract Named Columns from a Pandas Dataframe",desc:"Supply a list of column names (strings) to extract from a dataframe for more convenient manipulation."}),i.DataframeInsertColumn=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"D",type:t.OUTPUT_TYPES.DATAFRAME,desc:"Dataframe into which a new column will be inserted"},{required:!1,shortName:"I",default:0,type:t.OUTPUT_TYPES.NUMBER,desc:"Index of location of new Column. Must be 0 <= Index <= len(columns)"},{required:!1,shortName:"L",default:"0",type:t.OUTPUT_TYPES.STRING,desc:"Label / name of the new column"},{required:!0,shortName:"V",type:t.OUTPUT_TYPES.NUMPY_ARR,desc:"Values to insert"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"D",type:t.OUTPUT_TYPES.DATAFRAME}],n,"output"),r=e.extend({componentPrettyName:"Insert Columns"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = <%= IN_D %>.copy()\n<%= RESULT %>.insert(<%= IN_I %>, <%= IN_L %>, <%= IN_V %>, allow_duplicates=False)\n"});this.base_init(r)}},{label:"Insert a new column into a pandas dataframe",desc:"Supply the position, label, and values for a new column that will be inserted into an existing Pandas Dataframe"}),i.DataframeShape=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"D",type:t.OUTPUT_TYPES.DATAFRAME,desc:"Dataframe to learn the shape of"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"S",type:t.OUTPUT_TYPES.NUMPY_ARR,desc:"Shape, a touple representing the dimensionality of the data frame"},{shortName:"N",type:t.OUTPUT_TYPES.NUMPY_ARR,desc:"Number of Dimensions in each axis"},{shortName:"C",type:t.OUTPUT_TYPES.NUMBER,desc:"Size, the number of elements in the dataframe"},{shortName:"D",type:t.OUTPUT_TYPES.STRING,desc:"Data Types"}],n,"output"),r=e.extend({componentPrettyName:"Shape"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = (<%= IN_D %>.shape, <%= IN_D %>.ndim, <%= IN_D %>.size, <%= IN_D %>.dtypes)\n"});this.base_init(r)}},{label:"Shape of a Pandas Dataframe",desc:"Retrieve the dimensions and data types of a Dataframe"}),i.DataframeCopy=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{required:!0,shortName:"D",type:t.OUTPUT_TYPES.DATAFRAME,desc:"Dataframe to copy"}],n,"inputs"),i=this.createIObjectsFromJSON([{shortName:"D",type:t.OUTPUT_TYPES.DATAFRAME,desc:"A copy of the data frame"}],n,"output"),r=e.extend({componentPrettyName:"DF Copy"},n||{},{inputs:o,outputs:i,pythonTemplate:"<%= RESULT %> = <%= IN_D %>.copy()\n"});this.base_init(r)}},{label:"Copy a Pandas Dataframe",desc:"Make a copy of a pandas dataframe"}),i}),define("dataFlow/components/string",["underscore","dataFlow/core","dataFlow/dataTree","dataFlow/dataMatcher"],function(e,t,n,o){var i={};return i.StringComponent=t.Component.extend({initialize:function(n){var o=this.createIObjectsFromJSON([{shortName:"S",type:t.OUTPUT_TYPES.STRING,required:!0}],n,"output"),i=this.createIObjectsFromJSON([{required:!1,shortName:"S",type:t.OUTPUT_TYPES.STRING}],n,"inputs"),r=e.extend({componentPrettyName:"String"},n||{},{inputs:i,outputs:o,pythonTemplate:"<%= RESULT %> = <%= IN_S %>\n"});this.base_init(r)}},{label:"String",desc:"Holds a list of strings. You can use this to copy/paste string data from Google Docs or Excel"}),i}),define("dataFlow/dataFlow_loader",["underscore","dataFlow/core","dataFlow/components/outputComponents","dataFlow/components/number","dataFlow/components/simplemath","dataFlow/components/treeComponents","dataFlow/components/numpy_create","dataFlow/components/numpy_simplemath","dataFlow/components/numpy_basics","dataFlow/components/dataframe_create","dataFlow/components/dataframe_basics","dataFlow/components/string"],function(e,t,n,o,i,r,a,s,l,c,p,d){function u(t,n){e.each(t,function(e,t){e.module=n}),h.components[n]=h.components[n]||{},e.extend(h.components[n],t)}var h={};return h=e.extend(h,t),h.components={},u(r,"tree"),u(o,"number"),u(i,"simplemath"),u(a,"numpy_create"),u(n,"outputComponents"),u(s,"numpy_simplemath"),u(l,"numpy_basics"),u(c,"dataframe_create"),u(p,"dataframe_basics"),u(d,"string"),h.iterateComponents=function(t){return function n(o){for(var i=e.keys(o),r=0;r<i.length;r++){var a=i[r];"function"==typeof o[a]?t(a,o[a]):n(o[a])}}(h.components)},h.findComponentConstructorByName=function(e){var t=null;return h.iterateComponents(function(n,o){e===n&&(t=o)}),t},h.createComponentByName=function(t,n){var o=h.findComponentConstructorByName(t);return e.isNull(o)?(console.warn("Couldn't find component by name: "+t),null):new o(n)},h.iterateComponents(function(e,t){t.prototype.componentName=e}),h}),define("dataFlow/UI/contextMenuJupyter",["jquery","underscore","backbone","dataFlow/dataFlow_loader"],function(e,t,n,o){var i=null,r=t.template('<div class="context-menu">        <ul class="dropdown-menu" role="menu">        <li class="comp_Name"><span><%= componentName %></span></li>        <li><a tabindex="-1"><input type="text" placeholder="Component Name" value="<%= componentPrettyName %>"/></a></li>        <li class="divider"></li>            <li><a class="deleteComponent" tabindex="-1"><span class="fa fa-remove icongutter"></span>Delete</a></li>            <li><a class="helpTooltip" tabindex="-1"><span class="fa fa-question-circle icongutter"></span>Help: <%= componentName %> </a></li>        </ul>        </div>');return n.View.extend({events:{"click input":"keepMenu","contextmenu input":"keepMenu","click a.previewToggle":"togglePreview","click a.deleteComponent":"deleteComponent","keyup input":"editComponentPrettyName"},template:r,initialize:function(e){t.isNull(i)||i.destroy(),i=this;var n=e.x,o=e.y;this.registerCleanup(),this.render(n,o)},registerCleanup:function(){t.bindAll(this,"destroy"),this.hideEventHandlers={click:this.destroy,contextmenu:this.destroy,mousewheel:this.destroy},e(document).on(this.hideEventHandlers)},keepMenu:function(e){e.stopPropagation()},editComponentPrettyName:function(t){this.model.set("componentPrettyName",e(t.target).val())},togglePreview:function(){this.model.set("preview",!this.model.get("preview"))},deleteComponent:function(){this.model.destroy()},exportSVG:function(){this.model.exportGeometry("SVG")},render:function(t,n){var o=this.template(this.model.toJSON());e("body").append(this.$el),this.$el.append(e(o)).find("div.context-menu").css({display:"block",top:n+"px",left:t+"px"})},destroy:function(){e(document).off(this.hideEventHandlers),this.$el.empty(),this.remove(),i=null}})}),define("dataFlow/UI/helpTooltips",["jquery","underscore","dataFlow/enums","backbone"],function(e,t,n,o){function i(){l&&(l.popover&&l.popover("destroy"),l.off("show.bs.popover"),l.remove(),l=null)}function r(){this.mouseDown=0,t.bindAll(this,"incrementMousedown","decrementMousedown","mouseEnter"),e(s).on("mouseenter","div.draggable",this.mouseEnter),e(s).on("mousedown",this.incrementMousedown),e(s).on("mouseup",this.decrementMousedown)}function a(e){var o=e.toJSON();return o.defaultValue=t.isUndefined(o.default)||t.isNull(o.default)?"(none)":o.default,o.desc=t.isUndefined(o.desc)?"":o.desc,o.interpretAs=n.DISPLAY_NAMES.INTERPRET_AS[o.interpretAs]||"Item",o.required=!!t.isUndefined(o.required)||o.required,o.type=n.DISPLAY_NAMES.OUTPUT_TYPES[e.get("type")],o}var s="div.TOP",l=null;t.once(function(){document.addEventListener("mousewheel",i,!1),document.addEventListener("DOMMouseScroll",i,!1)})(),r.prototype.incrementMousedown=function(){i(),this.mouseDown=this.mouseDown+1},r.prototype.decrementMousedown=function(){this.mouseDown=this.mouseDown-1};t.template("<ul class='io_tooltip'><% if (desc != '') { %><li><span class='io_description'><%= desc %><% if (required) { %>*<% } %></span></li><% } %><li><span class='io_isRequired'><% if (required) { %>*<% } %>(<% if (!required) { %>Not <% } %>Required)</span></li><% if (defaultValue != '(none)') { %><li><span class='io_tooltip_field_title'>Default Value: </span> <span class='io_tooltip_field_value'><%= defaultValue %></span></li><% } %><li><span class='io_tooltip_field_title'>Interpreted as: </span><span class='io_tooltip_field_value'><%= interpretAs %></span></li></ul>"),t.template("<ul class='io_tooltip'><% if (desc == '') { %><li><span class='io_tooltip_field_title'>(no description)</span></li><% } else { %><li><span class='io_description'><%= desc %></span></li><% } %></ul>"),t.template("<%= shortName %>: <%= type %>");var c=t.template("<%= componentPrettyName %> <span class='cmpt_tooltip_title_modulename'>(<%= module %>.<%= componentName %>)</span>"),p=t.template("<% _.each(errors,function(e,idx){ %>        <div class='cmpt_error_line'>           <span class='err_type'><%= e.type %>:</span>           <span class='err_msg'><%= e.message %></span>       <div> <% }) %>"),d=t.template("<div class='cmpt_tooltip'>   <div class='cmpt_description'><%= description %></div>        <div class='cmpt_io_container'>           <span class='cmpt_io_title'>Inputs:</span><% _.each(inputs,function(i){ %>        <div class='cmpt_io'>           <span class='cmpt_io_name'><%= i.shortName %><% if (i.required) { %>*<% } %></span>           <span class='cmpt_io_details'>(<%= i.type %>, as <%= i.interpretAs %>) <%= i.desc %>               <% if (i.defaultValue != '(none)') { %>Default: <%= i.defaultValue %><% } %>           </span></span>       </div> <% }) %>           <span class='cmpt_io_title'>Outputs:</span><% _.each(outputs,function(i){ %>        <div class='cmpt_io'>           <span class='cmpt_io_name'><%= i.shortName %></span>           <span class='cmpt_io_details'>(<%= i.type %>, as <%= i.interpretAs %>) <%= i.desc %></span>       </div> <% }) %>           <span class='cmpt_io_required_legend'>* = required</span>       </div> </div>");return r.prototype.mouseEnter=function(n){if(0===this.mouseDown){n.stopPropagation(),n.preventDefault();try{var o=e(n.currentTarget).data("viewObject"),r=o.objectType}catch(n){return}i();var s=e(o.cssObject.element),u=(s=s.find(".componentLabel").size()>0?s.find(".componentLabel").get(0):s.get(0)).getBoundingClientRect(),h=t.template("<div class='locationAnchor' style='position: absolute;z-index:0; opacity: 0; width: <%= width %>px; height: <%= height %>px;top: <%= top %>px; left: <%= left %>px;'></div>");if(l=e(h(u)),e("body").append(l),!r||"OutputView"!=r&&"InputView"!=r){if(r&&r.indexOf("ComponentView")>-1){var m=function(e){var n=e.toJSON();return n.errors=e.errors,n.description=e.constructor.desc,n.label=e.constructor.label,n.module=e.constructor.module,n.inputs=t.map(e.inputs,function(e){return a(e)}),n.outputs=t.map(e.outputs,function(e){return a(e)}),n}(o.component),f="error"===o.component.get("sufficient");!function(t,n,o,r,a){var s=setTimeout(function(){l&&(r&&l.on("show.bs.popover",function(){e(this).data("bs.popover").tip().css(r)}),l.popover({title:t,html:!0,content:n,trigger:"manual",container:"body",placement:"auto "+o}).popover("show"),e(a).one("mouseleave",i))},600);e(a).one("mouseleave",function(){clearTimeout(s)})}(c(m),f?p(m):d(m),"top",{"max-width":"600px"},n.currentTarget)}}else;}},r.prototype.destroy=function(){i(),e(s).off("mouseenter","div.draggable",this.mouseEnter),e(s).off("mousedown",this.incrementMousedown),e(s).off("mouseup",this.decrementMousedown)},r}),define("CSS3DRenderer",["three"],function(e){e.CSS3DObject=function(t){e.Object3D.call(this),this.element=t,this.element.style.position="absolute",this.addEventListener("removed",function(e){null!==this.element.parentNode&&this.element.parentNode.removeChild(this.element)})},e.CSS3DObject.prototype=Object.create(e.Object3D.prototype),e.CSS3DObject.prototype.constructor=e.CSS3DObject,e.CSS3DSprite=function(t){e.CSS3DObject.call(this,t)},e.CSS3DSprite.prototype=Object.create(e.CSS3DObject.prototype),e.CSS3DSprite.prototype.constructor=e.CSS3DSprite,e.CSS3DRenderer=function(){console.log("THREE.CSS3DRenderer",e.REVISION);var t,n,o,i,r=new e.Matrix4,a={camera:{fov:0,style:""},objects:{}},s=document.createElement("div");s.style.overflow="hidden",s.style.WebkitTransformStyle="preserve-3d",s.style.MozTransformStyle="preserve-3d",s.style.oTransformStyle="preserve-3d",s.style.transformStyle="preserve-3d",this.domElement=s;var l=document.createElement("div");l.style.WebkitTransformStyle="preserve-3d",l.style.MozTransformStyle="preserve-3d",l.style.oTransformStyle="preserve-3d",l.style.transformStyle="preserve-3d",s.appendChild(l),this.setClearColor=function(){},this.getSize=function(){return{width:t,height:n}},this.setSize=function(e,r){o=(t=e)/2,i=(n=r)/2,s.style.width=e+"px",s.style.height=r+"px",l.style.width=e+"px",l.style.height=r+"px"};var c=function(e){return Math.abs(e)<Number.EPSILON?0:e},p=function(e){var t=e.elements;return"translate3d(-50%,-50%,0) matrix3d("+c(t[0])+","+c(t[1])+","+c(t[2])+","+c(t[3])+","+c(-t[4])+","+c(-t[5])+","+c(-t[6])+","+c(-t[7])+","+c(t[8])+","+c(t[9])+","+c(t[10])+","+c(t[11])+","+c(t[12])+","+c(t[13])+","+c(t[14])+","+c(t[15])+")"},d=function(t,n){if(t instanceof e.CSS3DObject){var o;t instanceof e.CSS3DSprite?(r.copy(n.matrixWorldInverse),r.transpose(),r.copyPosition(t.matrixWorld),r.scale(t.scale),r.elements[3]=0,r.elements[7]=0,r.elements[11]=0,r.elements[15]=1,o=p(r)):o=p(t.matrixWorld);var i=t.element,s=a.objects[t.id];void 0!==s&&s===o||(i.style.WebkitTransform=o,i.style.MozTransform=o,i.style.oTransform=o,i.style.transform=o,a.objects[t.id]=o),i.parentNode!==l&&l.appendChild(i)}for(var c=0,u=t.children.length;c<u;c++)d(t.children[c],n)};this.render=function(t,r){var p=.5/Math.tan(e.Math.degToRad(.5*r.getEffectiveFOV()))*n;a.camera.fov!==p&&(s.style.WebkitPerspective=p+"px",s.style.MozPerspective=p+"px",s.style.oPerspective=p+"px",s.style.perspective=p+"px",a.camera.fov=p),t.updateMatrixWorld(),null===r.parent&&r.updateMatrixWorld(),r.matrixWorldInverse.getInverse(r.matrixWorld);var u="translate3d(0,0,"+p+"px)"+function(e){var t=e.elements;return"matrix3d("+c(t[0])+","+c(-t[1])+","+c(t[2])+","+c(t[3])+","+c(t[4])+","+c(-t[5])+","+c(t[6])+","+c(t[7])+","+c(t[8])+","+c(-t[9])+","+c(t[10])+","+c(t[11])+","+c(t[12])+","+c(-t[13])+","+c(t[14])+","+c(t[15])+")"}(r.matrixWorldInverse)+" translate3d("+o+"px,"+i+"px, 0)";a.camera.style!==u&&(l.style.WebkitTransform=u,l.style.MozTransform=u,l.style.oTransform=u,l.style.transform=u,a.camera.style=u),d(t,r)}}}),define("OrbitControls",["three"],function(e){e.OrbitControls=function(t,n){function o(){return 2*Math.PI/60/60*c.autoRotateSpeed}function i(){return Math.pow(.95,c.zoomSpeed)}function r(e){if(!1!==c.enabled){if(0===e.button){if(!0===c.noRotate)return;_=E.ROTATE,p.set(e.clientX,e.clientY)}else if(1===e.button){if(!0===c.noZoom)return;e.preventDefault(),_=E.DOLLY,y.set(e.clientX,e.clientY)}else if(2===e.button){if(!0===c.noPan)return;e.preventDefault(),_=E.PAN,h.set(e.clientX,e.clientY)}document.addEventListener("mousemove",a,!1),document.addEventListener("mouseup",s,!1),c.dispatchEvent(A)}}function a(e){if(!1!==c.enabled){e.preventDefault();var t=c.domElement===document?c.domElement.body:c.domElement;if(_===E.ROTATE){if(!0===c.noRotate)return;d.set(e.clientX,e.clientY),u.subVectors(d,p),c.rotateLeft(2*Math.PI*u.x/t.clientWidth*c.rotateSpeed),c.rotateUp(2*Math.PI*u.y/t.clientHeight*c.rotateSpeed),p.copy(d)}else if(_===E.DOLLY){if(!0===c.noZoom)return;T.set(e.clientX,e.clientY),v.subVectors(T,y),v.y>0?c.dollyIn():c.dollyOut(),y.copy(T)}else if(_===E.PAN){if(!0===c.noPan)return;m.set(e.clientX,e.clientY),f.subVectors(m,h),c.pan(f.x,f.y),h.copy(m)}c.update()}}function s(){!1!==c.enabled&&(document.removeEventListener("mousemove",a,!1),document.removeEventListener("mouseup",s,!1),c.dispatchEvent(R),_=E.NONE)}function l(e){if(!(c.domElement.className.indexOf("freezeZooming")>-1)&&!1!==c.enabled&&!0!==c.noZoom){var t=0;void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail),t>0?c.dollyOut():c.dollyIn(),c.update(),c.dispatchEvent(A),c.dispatchEvent(R)}}this.object=t,this.domElement=void 0!==n?n:document,this.enabled=!0,this.target=new e.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=400,this.maxDistance=3e4,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};var c=this,p=new e.Vector2,d=new e.Vector2,u=new e.Vector2,h=new e.Vector2,m=new e.Vector2,f=new e.Vector2,b=new e.Vector3,g=new e.Vector3,y=new e.Vector2,T=new e.Vector2,v=new e.Vector2,w=0,N=0,O=1,x=new e.Vector3,P=new e.Vector3,S=new e.Quaternion,E={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},_=E.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone();var I=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),U=I.clone().inverse(),C={type:"change"},A={type:"start"},R={type:"end"};this.rotateLeft=function(e){void 0===e&&(e=o()),N-=e},this.rotateUp=function(e){void 0===e&&(e=o()),w-=e},this.panLeft=function(e){var t=this.object.matrix.elements;b.set(t[0],t[1],t[2]),b.multiplyScalar(-e),x.add(b)},this.panUp=function(e){var t=this.object.matrix.elements;b.set(t[4],t[5],t[6]),b.multiplyScalar(e),x.add(b)},this.pan=function(e,t){var n=c.domElement===document?c.domElement.body:c.domElement;if(void 0!==c.object.fov){var o=c.object.position.clone().sub(c.target).length();o*=Math.tan(c.object.fov/2*Math.PI/180),c.panLeft(2*e*o/n.clientHeight),c.panUp(2*t*o/n.clientHeight)}else void 0!==c.object.top?(c.panLeft(e*(c.object.right-c.object.left)/n.clientWidth),c.panUp(t*(c.object.top-c.object.bottom)/n.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(e){void 0===e&&(e=i()),O/=e},this.dollyOut=function(e){void 0===e&&(e=i()),O*=e},this.update=function(){var e=this.object.position;g.copy(e).sub(this.target),g.applyQuaternion(I);var t=Math.atan2(g.x,g.z),n=Math.atan2(Math.sqrt(g.x*g.x+g.z*g.z),g.y);this.autoRotate&&this.rotateLeft(o()),t+=N,n+=w,n=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,n)),n=Math.max(1e-6,Math.min(Math.PI-1e-6,n));var i=g.length()*O;i=Math.max(this.minDistance,Math.min(this.maxDistance,i)),this.target.add(x),g.x=i*Math.sin(n)*Math.sin(t),g.y=i*Math.cos(n),g.z=i*Math.sin(n)*Math.cos(t),g.applyQuaternion(U),e.copy(this.target).add(g),this.object.lookAt(this.target),N=0,w=0,O=1,x.set(0,0,0),(P.distanceToSquared(this.object.position)>1e-6||8*(1-S.dot(this.object.quaternion))>1e-6)&&(this.dispatchEvent(C),P.copy(this.object.position),S.copy(this.object.quaternion))},this.reset=function(){_=E.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.update()},this.domElement.addEventListener("contextmenu",function(e){e.preventDefault(),r(e)},!1),this.domElement.addEventListener("mousedown",r,!1),this.domElement.addEventListener("mousewheel",l,!1),this.domElement.addEventListener("DOMMouseScroll",l,!1),this.domElement.addEventListener("touchstart",function(e){if(!1!==c.enabled){switch(e.touches.length){case 1:if(!0===c.noRotate)return;_=E.TOUCH_ROTATE,p.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(!0===c.noZoom)return;_=E.TOUCH_DOLLY;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);y.set(0,o);break;case 3:if(!0===c.noPan)return;_=E.TOUCH_PAN,h.set(e.touches[0].pageX,e.touches[0].pageY);break;default:_=E.NONE}c.dispatchEvent(A)}},!1),this.domElement.addEventListener("touchend",function(){!1!==c.enabled&&(c.dispatchEvent(R),_=E.NONE)},!1),this.domElement.addEventListener("touchmove",function(e){if(!1!==c.enabled){e.preventDefault(),e.stopPropagation();var t=c.domElement===document?c.domElement.body:c.domElement;switch(e.touches.length){case 1:if(!0===c.noRotate)return;if(_!==E.TOUCH_ROTATE)return;d.set(e.touches[0].pageX,e.touches[0].pageY),u.subVectors(d,p),c.rotateLeft(2*Math.PI*u.x/t.clientWidth*c.rotateSpeed),c.rotateUp(2*Math.PI*u.y/t.clientHeight*c.rotateSpeed),p.copy(d),c.update();break;case 2:if(!0===c.noZoom)return;if(_!==E.TOUCH_DOLLY)return;var n=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(n*n+o*o);T.set(0,i),v.subVectors(T,y),v.y>0?c.dollyOut():c.dollyIn(),y.copy(T),c.update();break;case 3:if(!0===c.noPan)return;if(_!==E.TOUCH_PAN)return;m.set(e.touches[0].pageX,e.touches[0].pageY),f.subVectors(m,h),c.pan(f.x,f.y),h.copy(m),c.update();break;default:_=E.NONE}}},!1),this.update()},e.OrbitControls.prototype=Object.create(e.EventDispatcher.prototype)}),define("componentSearcher",["dataFlow/dataFlow_loader","underscore","jquery","bootstrap","bootstrap3-typeahead"],function(e,t,n){function o(e){this.$input=e,this.init()}var i=[];return e.iterateComponents(function(e,t){i.push({functionName:e,name:t.label,shortDescription:t.desc}),t.label&&t.desc||console&&console.warn(e+" lacks a name or description field. It will not be searchable.")}),o.prototype.init=function(){var e=this.$input,t=this,o=function(e,t){var n=new RegExp(this.query||t,"i");return(e.name+" "+e.shortDescription).search(n)>-1};e.on("submit",function(e){e.preventDefault()}),e.keyup(function(t){27===t.keyCode&&(e.val(""),e.data("active",null))}),e.typeahead({source:i,highlighter:function(e){var t=e.name+" / "+e.shortDescription,n=new RegExp(this.query,"gi");return t.replace(n,function(e){return"<strong>"+e+"</strong>"})},displayText:function(e){return e},matcher:o,sorter:function(e){for(var t,n=[],o=[],i=[],r=new RegExp(this.query,"i");t=e.pop();)0===t.name.search(r)?n.splice(0,0,t):t.name.search(r)>-1?n.push(t):t.shortDescription.search(r)>-1?o.push(t):i.push(t);return n.concat(o,i)},afterSelect:function(){var i=e.typeahead("getActive");i&&!0===o(i,e.val())&&n(t).trigger("selectedComponent",[i]),e.val("")}})},o.prototype.destroy=function(){this.$input.typeahead("destroy"),this.$input.remove()},o}),define("dataFlow/UI/workspaceView",["jquery","dataFlow/UI/contextMenuJupyter","dataFlow/enums","dataFlow/UI/helpTooltips","three","CSS3DRenderer","OrbitControls","underscore","backbone"],function(e,t,n,o,i){function r(){a=this,this.init()}_.extend(i.CSS3DObject.prototype,Backbone.Events,{addDraggableScopes:function(e){this.draggableScopes=_.union(this.draggableScopes||[],e)},addDroppableScopes:function(e){this.dropableScopes=_.union(this.dropableScopes||[],e)},getDroppableScopes:function(){return this.dropableScopes||[]},getDraggableScopes:function(){return this.draggableScopes||[]},isDroppableForScopes:function(e){return(-1===this.getDroppableScopes().indexOf("input")||-1!==e.indexOf("input"))&&((-1===this.getDroppableScopes().indexOf("output")||-1!==e.indexOf("output"))&&(e.indexOf(n.OUTPUT_TYPES.WILD)>-1||this.getDraggableScopes().indexOf(n.OUTPUT_TYPES.WILD)>-1||_.without(_.intersection(this.getDroppableScopes(),e),"input","output").length>0))},dropObject:function(e,t){this.trigger("drop",e,t)}}),_.extend(i.Mesh.prototype,Backbone.Events,{setHomePosition:function(){this.homePosition=this.position.clone()},getHomePosition:function(){return this.homePosition}});var a=null;r.prototype.init=function(){_.extend(this,Backbone.Events),_.bindAll(this,"destroy","drag","render","mouseUp","clearHover","setupDraggableView","startDraggingObject","getCurrentVisibleCenterPoint","hideChooser"),this.dragObject=null,this.dragOffset=[0,0],this.width=window.innerWidth,this.height=window.innerHeight,this.camera=new i.PerspectiveCamera(70,this.width/this.height,1,1e6),this.camera.position.z=1200},r.prototype.createWorkspace=function(){this.glscene=new i.Scene,this.glrenderer=new i.WebGLRenderer,this.glrenderer.setSize(this.width,this.height),document.body.appendChild(this.glrenderer.domElement),this.glrenderer.domElement.className="TOP",this.scene=new i.Scene,this.renderer=new i.CSS3DRenderer({alpha:!0}),this.renderer.setSize(this.width,this.height),document.body.appendChild(this.renderer.domElement),this.renderer.domElement.className="TOP",this.attachControls(),this.setupContextMenu(),this.helpTooltips=new o,this.setupDraggableEventHandlers(),l()},r.prototype.destroy=function(){this.helpTooltips.destroy(),delete this.helpTooltips,e(this.renderer.domElement).off().remove(),e(this.glrenderer.domElement).off().remove(),delete this.controls,delete this.scene,delete this.camera};var s={},l=_.once(function(){s[n.KEYS.SHIFT]=!1;window.onkeydown=function(e){e||(e=window.event),e.keyCode===n.KEYS.SHIFT&&(s[n.KEYS.SHIFT]=!0)},window.onkeyup=function(e){e||(e=window.event),e.keyCode===n.KEYS.SHIFT&&(s[n.KEYS.SHIFT]=!1)}});return r.prototype.toJSON=function(){var e=this.camera;return window.camera=this.camera,{camera:{position:e.position.toArray(),rotation:e.rotation.toArray()},controls:{target:this.controls.target.toArray()}}},r.prototype.fromJSON=function(e){if(e){if(e.camera){var t=["position","rotation","scale"],n=this.camera;_.each(t,function(t){e.camera[t]&&n[t].fromArray(e.camera[t])}),n.updateMatrixWorld(!0)}e.controls&&e.controls.target&&(this.controls.target.fromArray(e.controls.target),this.controls.target0.fromArray(e.controls.target),this.controls.update()),this.render()}},r.prototype.render=function(){this.renderer.render(this.scene,this.camera),this.glrenderer.render(this.glscene,this.camera)},r.prototype.attachControls=function(){this.controls=new i.OrbitControls(this.camera,this.renderer.domElement);var t=e(this.renderer.domElement);t.on("mouseleave",".freezeZooming",function(){t.removeClass("freezeZooming")}),t.on("mouseenter",".freezeZooming",function(){t.addClass("freezeZooming")}),this.controls.noRotate=!0,this.controls.zoomSpeed=.8,this.controls.addEventListener("change",this.render),e(this.controls.domElement).on("dblclick",{workspace:this},this.showChooser),e(this.controls.domElement).on("click",{workspace:this},this.hideChooser),this.render()},r.prototype.showChooser=function(t){var n=t.data.workspace,o={x:t.clientX,y:t.clientY},i=n.unprojectMouse(t.clientX,t.clientY),r=n.mouseWorldXYPosition(i),a=e('<input id="mobileSearcher" class="mobileComponentSearchInput"/>');e("body").append(a),a.css({top:o.y,left:o.x}).focus(),require(["componentSearcher"],function(t){n.searcher=new t(a),e(n.searcher).on("selectedComponent",function(e,t){t.position=r,n.trigger("createNewComponent",t),n.hideChooser()})})},r.prototype.hideChooser=function(){this.searcher&&this.searcher.destroy()},r.prototype.enableControls=function(e){this.controls.enabled=e},r.prototype.getCurrentVisibleCenterPoint=function(){return{x:this.camera.position.x,y:this.camera.position.y}},r.prototype.mouseUp=function(e){if(!_.isNull(this.dragObject)){var t=this.glDragObject.getHomePosition();if(_.isUndefined(t)||(this.dragObject.position.set(t.x,t.y,0),this.glDragObject.position.set(t.x,t.y,0),this.glDragObject.updateMatrixWorld(),this.glDragObject.trigger("changePosition"),this.render()),!_.isNull(this.hoverObject)){var n=s;-1!==this.hoverObject.getDroppableScopes().indexOf("output")?this.hoverObject.dropObject(this.dragObject,n):this.dragObject.dropObject(this.hoverObject,n)}this.dragObject=null,this.glDragObject=null,this.dragOffset={},this.renderer.domElement.removeEventListener("mousemove",this.drag),this.renderer.domElement.removeEventListener("mouseup",this.mouseUp)}_.isNull(this.hoverObject)||this.clearHover()},r.prototype.startDraggingObject=function(e){this.renderer.domElement.addEventListener("mousemove",this.drag),this.renderer.domElement.addEventListener("mouseup",this.mouseUp);var t=this.unprojectMouse(e.clientX,e.clientY),n=this.mouseWorldXYPosition(t);this.dragObject=e.object.cssObject,this.glDragObject=e.object.glObject,this.hoverObject=null,this.glHoverObject=null,this.dragOffset={x:n.x-this.dragObject.position.x,y:n.y-this.dragObject.position.y},this.intersectionObjects=this.computeDroppableObjects()},r.prototype.setupContextMenu=function(){e("div.TOP").on("contextmenu","div.draggable",function(n){n.stopPropagation(),n.preventDefault();var o=e(n.currentTarget).data("viewObject"),i=n.clientX,r=n.clientY;_.isUndefined(o.component)||new t({x:i,y:r,model:o.component})})},r.prototype.setupDraggableEventHandlers=function(){var t,n=this;e("div.TOP").on("mousedown","div.draggable",function(l){0===l.button&&!1!==n.controls.enabled&&(t=e(l.currentTarget).data("viewObject"),l.object=t,n.startDraggingObject(l),s++,_.isNull(o)&&(o=setTimeout(function(){clearTimeout(o),o=null,r=!0},i)),a||(a=setTimeout(function(){clearTimeout(a),a=null,!0===r?console.log("drag"):1===s&&function(e){"function"!=typeof t.click||_.isUndefined(e)||t.click(e.clientX,e.clientY)}(l),s=0},i)))}).on("mouseup","div.draggable",function(e){_.isNull(o)||(clearTimeout(o),o=null,r=!1)}).on("mouseout","div.draggable",function(){}).on("dblclick","div.draggable",function(e){e.stopPropagation(),"function"==typeof t.doubleclick?t.doubleclick():console.log("No doubleclick handler for view: ",t)});var o=null,i=200,r=!1,a=null,s=0},r.prototype.setupDraggableView=function(t){if(_.isUndefined(t.cssObject)||_.isUndefined(t.glObject))throw new Error("Draggable views must have both cssObject and glObject properties");e(t.cssObject.element).data("viewObject",t)},r.prototype.computeDroppableObjects=function(){function e(i){i===o.glDragObject||i===o.glscene||_.isUndefined(i.IOView)||i.IOView.cssObject.isDroppableForScopes(n)&&t.push(i),_.each(i.children,e)}var t=[],n=this.dragObject.getDraggableScopes(),o=this;return e(o.glscene),t},r.prototype.drag=function(e){event.preventDefault();var t=this.unprojectMouse(e.clientX,e.clientY),n=this.mouseWorldXYPosition(t);this.dragObject.position.set(n.x-this.dragOffset.x,n.y-this.dragOffset.y,0),this.glDragObject.position.set(n.x-this.dragOffset.x,n.y-this.dragOffset.y,0),this.glDragObject.trigger("changePosition"),this.findIntersections(t),this.render()},r.prototype.unprojectMouse=function(e,t){var n=new i.Vector3(e/this.glrenderer.domElement.clientWidth*2-1,-t/this.glrenderer.domElement.clientHeight*2+1,.5);return n.unproject(this.camera),n},r.prototype.mouseWorldXYPosition=function(e){if(void 0!==this.camera.fov){var t=e.clone().sub(this.camera.position).normalize(),n=-this.camera.position.z/t.z;return this.camera.position.clone().add(t.multiplyScalar(n))}},r.prototype.findIntersections=function(e){var t=new i.Raycaster(this.camera.position,e.clone().sub(this.camera.position).normalize()).intersectObjects(this.intersectionObjects,!0);if(t.length>0&&_.isNull(this.hoverObject)){var n=t[0];this.glHoverObject=n.object,this.hoverObject=n.object.IOView.cssObject,this.hoverObject.element.className+=" glHover"}_.isNull(this.hoverObject)||0!==t.length&&t[0].object===this.glHoverObject||this.clearHover()},r.prototype.clearHover=function(){this.hoverObject.element.className=this.hoverObject.element.className.replace(" glHover",""),this.glHoverObject=null,this.hoverObject=null},r.prototype.drawCurveFromPointToPoint=function(e,t,n){for(var o=Math.min(200,Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))),r=new i.Vector3(Math.max(e.x+o,e.x+2*(t.x-e.x)/3),e.y,0),a=new i.Vector3(Math.min(t.x-o,t.x-2*(t.x-e.x)/3),t.y,0),s=new i.CubicBezierCurve3(e,r,a,t),l=_.isUndefined(n),c=l?new i.Geometry:n.geometry,p=s.getPoints(30),d=0;d<p.length;d++)c.vertices[d]=p[d];if(c.verticesNeedUpdate=!0,l){var u=new i.LineBasicMaterial({color:16777215});(n=new i.Line(c,u)).frustumCulled=!1}return n},{getWorkspaceSingleton:function(){return a},Workspace:r}}),define("text",["module"],function(e){"use strict";function t(e,t){return void 0===e||""===e?t:e}var n,o,i,r,a,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],l=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,p="undefined"!=typeof location&&location.href,d=p&&location.protocol&&location.protocol.replace(/\:/,""),u=p&&location.hostname,h=p&&(location.port||void 0),m={},f=e.config&&e.config()||{};return n={version:"2.0.15",strip:function(e){if(e){var t=(e=e.replace(l,"")).match(c);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(e){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,o,i=!1,r=e.lastIndexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==r&&(!a||r>1)?(t=e.substring(0,r),n=e.substring(r+1)):t=e,o=n||t,-1!==(r=o.indexOf("!"))&&(i="strip"===o.substring(r+1),o=o.substring(0,r),n?n=o:t=o),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,o,i,r){var a,s,l,c=n.xdRegExp.exec(e);return!c||(a=c[2],s=c[3],s=s.split(":"),l=s[1],s=s[0],(!a||a===o)&&(!s||s.toLowerCase()===i.toLowerCase())&&(!l&&!s||function(e,n,o,i){if(n===i)return!0;if(e===o){if("http"===e)return t(n,"80")===t(i,"80");if("https"===e)return t(n,"443")===t(i,"443")}return!1}(a,l,o,r)))},finishLoad:function(e,t,o,i){o=t?n.strip(o):o,f.isBuild&&(m[e]=o),i(o)},load:function(e,t,o,i){if(i&&i.isBuild&&!i.inlineText)o();else{f.isBuild=i&&i.isBuild;var r=n.parseName(e),a=r.moduleName+(r.ext?"."+r.ext:""),s=t.toUrl(a),l=f.useXhr||n.useXhr;0!==s.indexOf("empty:")?!p||l(s,d,u,h)?n.get(s,function(t){n.finishLoad(e,r.strip,t,o)},function(e){o.error&&o.error(e)}):t([a],function(e){n.finishLoad(r.moduleName+"."+r.ext,r.strip,e,o)}):o()}},write:function(e,t,o,i){if(m.hasOwnProperty(t)){var r=n.jsEscape(m[t]);o.asModule(e+"!"+t,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,t,o,i,r){var a=n.parseName(t),s=a.ext?"."+a.ext:"",l=a.moduleName+s,c=o.toUrl(a.moduleName+s)+".js";n.load(l,o,function(t){var o=function(e){return i(c,e)};o.asModule=function(e,t){return i.asModule(e,c,t)},n.write(e,l,o,r)},r)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(o=require.nodeRequire("fs"),n.get=function(e,t,n){try{var i=o.readFileSync(e,"utf8");"\ufeff"===i[0]&&(i=i.substring(1)),t(i)}catch(e){n&&n(e)}}):"xhr"===f.env||!f.env&&n.createXhr()?n.get=function(e,t,o,i){var r,a=n.createXhr();if(a.open("GET",e,!0),i)for(r in i)i.hasOwnProperty(r)&&a.setRequestHeader(r.toLowerCase(),i[r]);f.onXhr&&f.onXhr(a,e),a.onreadystatechange=function(n){var i,r;4===a.readyState&&((i=a.status||0)>399&&i<600?((r=new Error(e+" HTTP status: "+i)).xhr=a,o&&o(r)):t(a.responseText),f.onXhrComplete&&f.onXhrComplete(a,e))},a.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?n.get=function(e,t){var n,o,i=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(i),"utf-8")),s="";try{for(n=new java.lang.StringBuffer,(o=a.readLine())&&o.length()&&65279===o.charAt(0)&&(o=o.substring(1)),null!==o&&n.append(o);null!==(o=a.readLine());)n.append(r),n.append(o);s=String(n.toString())}finally{a.close()}t(s)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,r=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),a="@mozilla.org/windows-registry-key;1"in i,n.get=function(e,t){var n,o,s,l={};a&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{(n=i["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream)).init(s,1,0,!1),(o=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream)).init(n,"utf-8",n.available(),r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),l),o.close(),n.close(),t(l.value)}catch(e){throw new Error((s&&s.path||"")+": "+e)}}),n}),define("text!lib/css/handsontable.min.css",[],function(){return'/*!\n * (The MIT License)\n * \n * Copyright (c) 2012-2014 Marcin Warpechowski\n * Copyright (c) 2015 Handsoncode sp. z o.o. <hello@handsoncode.net>\n * \n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \'Software\'), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n * \n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \'AS IS\', WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n * \n * Version: 0.35.0\n * Release date: 06/12/2017 (built at 06/12/2017 09:46:21)\n */.handsontable .table td,.handsontable .table th{border-top:none}.handsontable tr{background:#fff}.handsontable td{background-color:inherit}.handsontable .table caption+thead tr:first-child td,.handsontable .table caption+thead tr:first-child th,.handsontable .table colgroup+thead tr:first-child td,.handsontable .table colgroup+thead tr:first-child th,.handsontable .table thead:first-child tr:first-child td,.handsontable .table thead:first-child tr:first-child th{border-top:1px solid #ccc}.handsontable .table-bordered{border:0;border-collapse:separate}.handsontable .table-bordered td,.handsontable .table-bordered th{border-left:none}.handsontable .table-bordered td:first-child,.handsontable .table-bordered th:first-child{border-left:1px solid #ccc}.handsontable .table>tbody>tr>td,.handsontable .table>tbody>tr>th,.handsontable .table>tfoot>tr>td,.handsontable .table>tfoot>tr>th,.handsontable .table>thead>tr>td,.handsontable .table>thead>tr>th{line-height:21px;padding:0 4px}.col-lg-1.handsontable,.col-lg-2.handsontable,.col-lg-3.handsontable,.col-lg-4.handsontable,.col-lg-5.handsontable,.col-lg-6.handsontable,.col-lg-7.handsontable,.col-lg-8.handsontable,.col-lg-9.handsontable,.col-lg-10.handsontable,.col-lg-11.handsontable,.col-lg-12.handsontable,.col-md-1.handsontable,.col-md-2.handsontable,.col-md-3.handsontable,.col-md-4.handsontable,.col-md-5.handsontable,.col-md-6.handsontable,.col-md-7.handsontable,.col-md-8.handsontable,.col-md-9.handsontable .col-sm-1.handsontable,.col-md-10.handsontable,.col-md-11.handsontable,.col-md-12.handsontable,.col-sm-2.handsontable,.col-sm-3.handsontable,.col-sm-4.handsontable,.col-sm-5.handsontable,.col-sm-6.handsontable,.col-sm-7.handsontable,.col-sm-8.handsontable,.col-sm-9.handsontable .col-xs-1.handsontable,.col-sm-10.handsontable,.col-sm-11.handsontable,.col-sm-12.handsontable,.col-xs-2.handsontable,.col-xs-3.handsontable,.col-xs-4.handsontable,.col-xs-5.handsontable,.col-xs-6.handsontable,.col-xs-7.handsontable,.col-xs-8.handsontable,.col-xs-9.handsontable,.col-xs-10.handsontable,.col-xs-11.handsontable,.col-xs-12.handsontable{padding-left:0;padding-right:0}.handsontable .table-striped>tbody>tr:nth-of-type(2n){background-color:#fff}.handsontable{position:relative}.handsontable .hide{display:none}.handsontable .relative{position:relative}.handsontable.htAutoSize{visibility:hidden;left:-99000px;position:absolute;top:-99000px}.handsontable .wtHider{width:0}.handsontable .wtSpreader{position:relative;width:0;height:auto}.handsontable div,.handsontable input,.handsontable table,.handsontable tbody,.handsontable td,.handsontable textarea,.handsontable th,.handsontable thead{box-sizing:content-box;-webkit-box-sizing:content-box;-moz-box-sizing:content-box}.handsontable input,.handsontable textarea{min-height:0}.handsontable table.htCore{border-collapse:separate;border-spacing:0;margin:0;border-width:0;table-layout:fixed;width:0;outline-width:0;max-width:none;max-height:none}.handsontable col,.handsontable col.rowHeader{width:50px}.handsontable td,.handsontable th{border-top-width:0;border-left-width:0;border-right:1px solid #ccc;border-bottom:1px solid #ccc;height:22px;empty-cells:show;line-height:21px;padding:0 4px;background-color:#fff;vertical-align:top;overflow:hidden;outline-width:0;white-space:pre-line;background-clip:padding-box}.handsontable td.htInvalid{background-color:#ff4c42!important}.handsontable td.htNoWrap{white-space:nowrap}.handsontable th:last-child{border-right:1px solid #ccc;border-bottom:1px solid #ccc}.handsontable th.htNoFrame,.handsontable th:first-child.htNoFrame,.handsontable tr:first-child th.htNoFrame{border-left-width:0;background-color:#fff;border-color:#fff}.handsontable .htNoFrame+td,.handsontable .htNoFrame+th,.handsontable.htRowHeaders thead tr th:nth-child(2),.handsontable td:first-of-type,.handsontable th:first-child,.handsontable th:nth-child(2){border-left:1px solid #ccc}.handsontable tr:first-child td,.handsontable tr:first-child th{border-top:1px solid #ccc}.ht_master:not(.innerBorderLeft):not(.emptyColumns)~.handsontable:not(.ht_clone_top) thead tr th:first-child,.ht_master:not(.innerBorderLeft):not(.emptyColumns)~.handsontable tbody tr th{border-right-width:0}.ht_master:not(.innerBorderTop) thead tr.lastChild th,.ht_master:not(.innerBorderTop) thead tr:last-child th,.ht_master:not(.innerBorderTop)~.handsontable thead tr.lastChild th,.ht_master:not(.innerBorderTop)~.handsontable thead tr:last-child th{border-bottom-width:0}.handsontable th{background-color:#f3f3f3;color:#222;text-align:center;font-weight:400;white-space:nowrap}.handsontable thead th{padding:0}.handsontable th.active{background-color:#ccc}.handsontable thead th .relative{padding:2px 4px}.handsontable tbody th.ht__highlight,.handsontable thead th.ht__highlight{background-color:#dcdcdc}.handsontable.ht__selection--columns thead th.ht__highlight,.handsontable.ht__selection--rows tbody th.ht__highlight{background-color:#8eb0e7;color:#000}#hot-display-license-info{font-size:9px;color:#323232;padding:5px 0 3px;font-family:Helvetica,Arial,sans-serif;text-align:left}.handsontable .manualColumnResizer{position:fixed;top:0;cursor:col-resize;z-index:6;width:5px;height:25px}.handsontable .manualRowResizer{position:fixed;left:0;cursor:row-resize;z-index:6;height:5px;width:50px}.handsontable .manualColumnResizer.active,.handsontable .manualColumnResizer:hover,.handsontable .manualRowResizer.active,.handsontable .manualRowResizer:hover{background-color:#aab}.handsontable .manualColumnResizerGuide{position:fixed;right:0;top:0;background-color:#aab;display:none;width:0;border-right:1px dashed #777;margin-left:5px}.handsontable .manualRowResizerGuide{position:fixed;left:0;bottom:0;background-color:#aab;display:none;height:0;border-bottom:1px dashed #777;margin-top:5px}.handsontable .manualColumnResizerGuide.active,.handsontable .manualRowResizerGuide.active{display:block;z-index:7}.handsontable .columnSorting{position:relative}.handsontable .columnSorting:hover{text-decoration:underline;cursor:pointer}.handsontable .columnSorting.ascending:after{content:"\\25B2";color:#5f5f5f;position:absolute;right:-15px}.handsontable .columnSorting.descending:after{content:"\\25BC";color:#5f5f5f;position:absolute;right:-15px}.handsontable .wtBorder{position:absolute;font-size:0}.handsontable .wtBorder.hidden{display:none!important}.handsontable td.area{background:linear-gradient(180deg,rgba(181,209,255,.34) 0,rgba(181,209,255,.34));filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#57b5d1ff",endColorstr="#57b5d1ff",GradientType=0);background-color:#fff}.handsontable .wtBorder.corner{font-size:0;cursor:crosshair}.handsontable .htBorder.htFillBorder{background:red;width:1px;height:1px}.handsontableInput{border:none;outline-width:0;margin:0;padding:1px 5px 0;font-family:inherit;line-height:21px;font-size:inherit;box-shadow:inset 0 0 0 2px #5292f7;resize:none;display:block;color:#000;border-radius:0;background-color:#fff}.handsontableInputHolder{position:absolute;top:0;left:0;z-index:1}.htSelectEditor{-webkit-appearance:menulist-button!important;position:absolute;width:auto}.handsontable .htDimmed{color:#777}.handsontable .htSubmenu{position:relative}.handsontable .htSubmenu :after{content:"\\25B6";color:#777;position:absolute;right:5px}.handsontable .htLeft{text-align:left}.handsontable .htCenter{text-align:center}.handsontable .htRight{text-align:right}.handsontable .htJustify{text-align:justify}.handsontable .htTop{vertical-align:top}.handsontable .htMiddle{vertical-align:middle}.handsontable .htBottom{vertical-align:bottom}.handsontable .htPlaceholder{color:#999}.handsontable .htAutocompleteArrow{float:right;font-size:10px;color:#eee;cursor:default;width:16px;text-align:center}.handsontable td .htAutocompleteArrow:hover{color:#777}.handsontable td.area .htAutocompleteArrow{color:#d3d3d3}.handsontable .htCheckboxRendererInput{display:inline-block;vertical-align:middle}.handsontable .htCheckboxRendererInput.noValue{opacity:.5}.handsontable .htCheckboxRendererLabel{cursor:pointer;display:inline-block;width:100%}@-webkit-keyframes a{0%{opacity:1}to{opacity:0}}@keyframes a{0%{opacity:1}to{opacity:0}}@-webkit-keyframes b{0%{opacity:0}to{opacity:1}}@keyframes b{0%{opacity:0}to{opacity:1}}.handsontable .handsontable.ht_clone_top .wtHider{padding:0 0 5px}.handsontable .autocompleteEditor.handsontable{padding-right:17px}.handsontable .autocompleteEditor.handsontable.htMacScroll{padding-right:15px}.handsontable.listbox{margin:0}.handsontable.listbox .ht_master table{border:1px solid #ccc;border-collapse:separate;background:#fff}.handsontable.listbox td,.handsontable.listbox th,.handsontable.listbox tr:first-child td,.handsontable.listbox tr:first-child th,.handsontable.listbox tr:last-child th{border-color:transparent}.handsontable.listbox td,.handsontable.listbox th{white-space:nowrap;text-overflow:ellipsis}.handsontable.listbox td.htDimmed{cursor:default;color:inherit;font-style:inherit}.handsontable.listbox .wtBorder{visibility:hidden}.handsontable.listbox tr:hover td,.handsontable.listbox tr td.current{background:#eee}.ht_clone_top{z-index:2}.ht_clone_left{z-index:3}.ht_clone_bottom_left_corner,.ht_clone_debug,.ht_clone_top_left_corner{z-index:4}.handsontable td.htSearchResult{background:#fcedd9;color:#583707}.htBordered{border-width:1px}.htBordered.htTopBorderSolid{border-top-style:solid;border-top-color:#000}.htBordered.htRightBorderSolid{border-right-style:solid;border-right-color:#000}.htBordered.htBottomBorderSolid{border-bottom-style:solid;border-bottom-color:#000}.htBordered.htLeftBorderSolid{border-left-style:solid;border-left-color:#000}.handsontable tbody tr th:nth-last-child(2){border-right:1px solid #ccc}.handsontable thead tr:nth-last-child(2) th.htGroupIndicatorContainer{border-bottom:1px solid #ccc;padding-bottom:5px}.ht_clone_top_left_corner thead tr th:nth-last-child(2){border-right:1px solid #ccc}.htCollapseButton{width:10px;height:10px;line-height:10px;text-align:center;border-radius:5px;border:1px solid #f3f3f3;box-shadow:1px 1px 3px rgba(0,0,0,.4);cursor:pointer;margin-bottom:3px;position:relative}.htCollapseButton:after{content:"";height:300%;width:1px;display:block;background:#ccc;margin-left:4px;position:absolute;bottom:10px}thead .htCollapseButton{right:5px;position:absolute;top:5px;background:#fff}thead .htCollapseButton:after{height:1px;width:700%;right:10px;top:4px}.handsontable tr th .htExpandButton{position:absolute;width:10px;height:10px;line-height:10px;text-align:center;border-radius:5px;border:1px solid #f3f3f3;box-shadow:1px 1px 3px rgba(0,0,0,.4);cursor:pointer;top:0;display:none}.handsontable thead tr th .htExpandButton{top:5px}.handsontable tr th .htExpandButton.clickable{display:block}.collapsibleIndicator{position:absolute;top:50%;transform:translateY(-50%);right:5px;border:1px solid #a6a6a6;line-height:10px;color:#222;border-radius:10px;font-size:10px;width:10px;height:10px;cursor:pointer;box-shadow:0 0 0 6px #eee;background:#eee}.handsontable col.hidden{width:0!important}.handsontable table tr th.lightRightBorder{border-right:1px solid #e6e6e6}.handsontable tr.hidden,.handsontable tr.hidden td,.handsontable tr.hidden th{display:none}.ht_clone_bottom,.ht_clone_left,.ht_clone_top,.ht_master{overflow:hidden}.ht_master .wtHolder{overflow:auto}.ht_clone_left .wtHolder{overflow-x:hidden;overflow-y:auto}.ht_clone_bottom .wtHolder,.ht_clone_top .wtHolder{overflow-x:auto;overflow-y:hidden}.wtDebugHidden{display:none}.wtDebugVisible{display:block;-webkit-animation-duration:.5s;-webkit-animation-name:c;animation-duration:.5s;animation-name:c}@keyframes c{0%{display:none;opacity:0}1%{display:block;opacity:0}to{display:block;opacity:1}}@-webkit-keyframes c{0%{display:none;opacity:0}1%{display:block;opacity:0}to{display:block;opacity:1}}.handsontable.mobile,.handsontable.mobile .wtHolder{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-overflow-scrolling:touch}.htMobileEditorContainer{display:none;position:absolute;top:0;width:70%;height:54pt;background:#f8f8f8;border-radius:20px;border:1px solid #ebebeb;z-index:8;box-sizing:border-box;-webkit-box-sizing:border-box;-webkit-text-size-adjust:none}.topLeftSelectionHandle-HitArea:not(.ht_master .topLeftSelectionHandle-HitArea),.topLeftSelectionHandle:not(.ht_master .topLeftSelectionHandle){z-index:11}.bottomRightSelectionHandle,.bottomRightSelectionHandle-HitArea,.topLeftSelectionHandle,.topLeftSelectionHandle-HitArea{left:-10000px;top:-10000px}.htMobileEditorContainer.active{display:block}.htMobileEditorContainer .inputs{position:absolute;right:210pt;bottom:10pt;top:10pt;left:14px;height:34pt}.htMobileEditorContainer .inputs textarea{font-size:13pt;border:1px solid #a1a1a1;-webkit-appearance:none;box-shadow:none;position:absolute;left:14px;right:14px;top:0;bottom:0;padding:7pt}.htMobileEditorContainer .cellPointer{position:absolute;top:-13pt;height:0;width:0;left:30px;border-left:13pt solid transparent;border-right:13pt solid transparent;border-bottom:13pt solid #ebebeb}.htMobileEditorContainer .cellPointer.hidden{display:none}.htMobileEditorContainer .cellPointer:before{content:"";display:block;position:absolute;top:2px;height:0;width:0;left:-13pt;border-left:13pt solid transparent;border-right:13pt solid transparent;border-bottom:13pt solid #f8f8f8}.htMobileEditorContainer .moveHandle{position:absolute;top:10pt;left:5px;width:30px;bottom:0;cursor:move;z-index:11}.htMobileEditorContainer .moveHandle:after{content:"..\\A..\\A..\\A..";white-space:pre;line-height:10px;font-size:20pt;display:inline-block;margin-top:-8px;color:#ebebeb}.htMobileEditorContainer .positionControls{width:205pt;position:absolute;right:5pt;top:0;bottom:0}.htMobileEditorContainer .positionControls>div{width:50pt;height:100%;float:left}.htMobileEditorContainer .positionControls>div:after{content:" ";display:block;width:15pt;height:15pt;text-align:center;line-height:50pt}.htMobileEditorContainer .downButton:after,.htMobileEditorContainer .leftButton:after,.htMobileEditorContainer .rightButton:after,.htMobileEditorContainer .upButton:after{transform-origin:5pt 5pt;-webkit-transform-origin:5pt 5pt;margin:21pt 0 0 21pt}.htMobileEditorContainer .leftButton:after{border-top:2px solid #288ffe;border-left:2px solid #288ffe;-webkit-transform:rotate(-45deg)}.htMobileEditorContainer .leftButton:active:after{border-color:#cfcfcf}.htMobileEditorContainer .rightButton:after{border-top:2px solid #288ffe;border-left:2px solid #288ffe;-webkit-transform:rotate(135deg)}.htMobileEditorContainer .rightButton:active:after{border-color:#cfcfcf}.htMobileEditorContainer .upButton:after{border-top:2px solid #288ffe;border-left:2px solid #288ffe;-webkit-transform:rotate(45deg)}.htMobileEditorContainer .upButton:active:after{border-color:#cfcfcf}.htMobileEditorContainer .downButton:after{border-top:2px solid #288ffe;border-left:2px solid #288ffe;-webkit-transform:rotate(225deg)}.htMobileEditorContainer .downButton:active:after{border-color:#cfcfcf}.handsontable.hide-tween{-webkit-animation:a .3s;animation:a .3s;animation-fill-mode:forwards;-webkit-animation-fill-mode:forwards}.handsontable.show-tween{-webkit-animation:b .3s;animation:b .3s;animation-fill-mode:forwards;-webkit-animation-fill-mode:forwards}.htCommentCell{position:relative}.htCommentCell:after{content:"";position:absolute;top:0;right:0;border-left:6px solid transparent;border-top:6px solid #000}.htComments{display:none;z-index:9;position:absolute}.htCommentTextArea{box-shadow:0 1px 3px rgba(0,0,0,.117647),0 1px 2px rgba(0,0,0,.239216);box-sizing:border-box;border:none;border-left:3px solid #ccc;background-color:#fff;width:215px;height:90px;font-size:12px;padding:5px;outline:0!important;-webkit-appearance:none}.htCommentTextArea:focus{box-shadow:0 1px 3px rgba(0,0,0,.117647),0 1px 2px rgba(0,0,0,.239216),inset 0 0 0 1px #5292f7;border-left:3px solid #5292f7}\n/*!\n * Handsontable ContextMenu\n */.htContextMenu{display:none;position:absolute;z-index:10}.htContextMenu .ht_clone_corner,.htContextMenu .ht_clone_debug,.htContextMenu .ht_clone_left,.htContextMenu .ht_clone_top{display:none}.htContextMenu table.htCore{border:1px solid #ccc;border-bottom-width:2px;border-right-width:2px}.htContextMenu .wtBorder{visibility:hidden}.htContextMenu table tbody tr td{background:#fff;border-width:0;padding:4px 6px 0;cursor:pointer;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.htContextMenu table tbody tr td:first-child{border:0}.htContextMenu table tbody tr td.htDimmed{font-style:normal;color:#323232}.htContextMenu table tbody tr td.current,.htContextMenu table tbody tr td.zeroclipboard-is-hover{background:#f3f3f3}.htContextMenu table tbody tr td.htSeparator{border-top:1px solid #bbb;height:0;padding:0;cursor:default}.htContextMenu table tbody tr td.htDisabled{color:#999;cursor:default}.htContextMenu table tbody tr td.htDisabled:hover{background:#fff;color:#999;cursor:default}.htContextMenu table tbody tr.htHidden{display:none}.htContextMenu table tbody tr td .htItemWrapper{margin-left:10px;margin-right:6px}.htContextMenu table tbody tr td div span.selected{margin-top:-2px;position:absolute;left:4px}.htContextMenu .ht_master .wtHolder{overflow:hidden}textarea#HandsontableCopyPaste{position:fixed!important;top:0!important;right:100%!important;overflow:hidden;opacity:0;outline:0 none!important}.htRowHeaders .ht_master.innerBorderLeft~.ht_clone_left td:first-of-type,.htRowHeaders .ht_master.innerBorderLeft~.ht_clone_top_left_corner th:nth-child(2){border-left:0 none}.handsontable.ht__manualColumnMove.after-selection--columns thead th.ht__highlight{cursor:move;cursor:-webkit-grab;cursor:grab}.handsontable.ht__manualColumnMove.on-moving--columns,.handsontable.ht__manualColumnMove.on-moving--columns thead th.ht__highlight{cursor:move;cursor:-webkit-grabbing;cursor:grabbing}.handsontable.ht__manualColumnMove.on-moving--columns .manualColumnResizer{display:none}.handsontable .ht__manualColumnMove--backlight,.handsontable .ht__manualColumnMove--guideline{position:absolute;height:100%;display:none}.handsontable .ht__manualColumnMove--guideline{background:#757575;width:2px;top:0;margin-left:-1px;z-index:5}.handsontable .ht__manualColumnMove--backlight{background:#343434;background:rgba(52,52,52,.25);display:none;z-index:5;pointer-events:none}.handsontable.on-moving--columns .ht__manualColumnMove--backlight,.handsontable.on-moving--columns.show-ui .ht__manualColumnMove--guideline{display:block}.handsontable .wtHider{position:relative}.handsontable.ht__manualRowMove.after-selection--rows tbody th.ht__highlight{cursor:move;cursor:-webkit-grab;cursor:grab}.handsontable.ht__manualRowMove.on-moving--rows,.handsontable.ht__manualRowMove.on-moving--rows tbody th.ht__highlight{cursor:move;cursor:-webkit-grabbing;cursor:grabbing}.handsontable.ht__manualRowMove.on-moving--rows .manualRowResizer{display:none}.handsontable .ht__manualRowMove--backlight,.handsontable .ht__manualRowMove--guideline{position:absolute;width:100%;display:none}.handsontable .ht__manualRowMove--guideline{background:#757575;height:2px;left:0;margin-top:-1px;z-index:5}.handsontable .ht__manualRowMove--backlight{background:#343434;background:rgba(52,52,52,.25);display:none;z-index:5;pointer-events:none}.handsontable.on-moving--rows .ht__manualRowMove--backlight,.handsontable.on-moving--rows.show-ui .ht__manualRowMove--guideline{display:block}'}),define("HandsontableWrapper",["Handsontable","jquery","text!lib/css/handsontable.min.css"],function(e,t,n){return t("head").append("<style type='text/css'>"+n+"</style>"),e}),define("dataFlow/UI/tableValueEnterer",["jquery","underscore","dataFlow/dataTree","HandsontableWrapper","dataFlow/enums"],function(e,t,n,o,i){function r(e,t,n,o,i,r){this.init.apply(this,arguments)}var a={};return a[i.OUTPUT_TYPES.NUMBER]={type:"numeric"},a[i.OUTPUT_TYPES.STRING]={type:"text"},a[i.OUTPUT_TYPES.BOOLEAN]={type:"checkbox"},r.prototype.init=function(e,n,o,i,r,a){this.callback=i,this.data=e,this.dataType=r,this.readOnly=!!a,t.bindAll(this,"dataAsArrayOfArrays","initializeTable","cleanDataArray"),this.overlay=this.createOverlay(),this.$tableContainer=this.insertTable(n,o);var s=this.dataAsArrayOfArrays(e);this.dataArray=s[0],this.dataHeaderArray=s[1],this.initializeTable()},r.prototype.initializeTable=function(){var e=this;this.table=new o(this.$tableContainer.find("#editableTable").get(0),{data:e.dataArray,contextMenu:!0,colWidths:100,minSpareRows:50,rowHeaders:!e.readOnly||function(t){return e.dataHeaderArray[t]||""},columns:[a[e.dataType]]})},r.prototype.dataAsArrayOfArrays=function(e){var n=[],o=[];return e.recurseTree(function(e,i){var r="{"+i.getPath().join(";")+"}";t.each(e,function(e,t){n.push([e.toString()]),o.push(r+" ("+t+")")})}),[n,o]},r.prototype.createOverlay=function(){var t="overlay_"+Math.floor(1e4*Math.random()),n=e("<div id='"+t+"' class='TOP workspaceOverlay'></div>");e("body").append(n);var o=this;return n.on("click",function(){o.overlay.off(),o.overlay.remove(),o.destroy()}),n},r.prototype.cleanDataArray=function(){return this.dataType===i.OUTPUT_TYPES.NUMBER?t.map(t.filter(this.dataArray,function(e){return!(t.isEmpty(e)||t.isUndefined(e[0])||t.isNull(e[0])||t.isNaN(Number(e[0])))}),function(e){return Number(e[0])}):this.dataType===i.OUTPUT_TYPES.STRING?t.map(t.filter(this.dataArray,function(e){return!t.isEmpty(e)&&!t.isEmpty(e[0])}),function(e){return e[0]}):this.dataType===i.OUTPUT_TYPES.BOOLEAN?(console.warn("NOT IMPLEMENTED: PARSING FOR BOOLEANS"),!0):void 0},r.prototype.destroy=function(){this.table.deselectCell();var e=this;t.delay(function(){e.table.destroy(),e.$tableContainer.remove(),"function"!=typeof e.callback||e.readOnly||(e.data.setDataAtPath(e.cleanDataArray(),[0]),e.callback(e.data))},10)},r.prototype.insertTable=function(t,n){var o=e("<div class='tableView'><div id='editableTable' style='position:relative; overflow: hidden; height: 200px;'></div></div>");return o.css({top:n,left:t,height:200,width:150,"z-index":102,position:"absolute",display:"block"}),e("body").append(o),o},r}),define("dataFlow/UI/inputOutputView",["dataFlow/dataFlow_loader","dataFlow/UI/workspaceView","underscore","dataFlow/enums","three"],function(e,t,n,o,i){function r(e,i,r){if(n.isUndefined(e)||n.isUndefined(i)||n.isUndefined(r))throw new Error("IOView must be passed a model and associated GL and CSS Views");this.model=e,this.glObject=i,this.cssObject=r,this.model.IOView=this,this.glObject.IOView=this,this.cssObject.IOView=this,n.extend(this,Backbone.Events),this._remove=function(){this.stopListening(),this.stretchy.parent.remove(this.stretchy),this.glObject.parent.remove(this.glObject),this.cssObject.parent.remove(this.cssObject),delete this.glObject.IOView,delete this.cssObject.IOView,delete this.model.IOView,delete this.model,delete this.glObject,delete this.cssObject},this.setupStretchyWire=function(){this.glObject.setHomePosition(),this.stretchy=t.getWorkspaceSingleton().drawCurveFromPointToPoint(this.glObject.getHomePosition(),this.glObject.position),this.glObject.parent.add(this.stretchy),this.stretchyCurveArguments=[i.position,i.getHomePosition()],this.listenTo(this.glObject,"changePosition",function(){t.getWorkspaceSingleton().drawCurveFromPointToPoint(this.stretchyCurveArguments[0],this.stretchyCurveArguments[1],this.stretchy)})},this.doubleclick=function(){this.model.getTree().log()};var a=this;this.click=function(e,t){if(a.model.type===o.OUTPUT_TYPES.NUMBER||a.model.type===o.OUTPUT_TYPES.BOOLEAN||a.model.type===o.OUTPUT_TYPES.STRING){var n=a.model.get("persistedData")||new DataTree,i=function(e){a.model.assignPersistedData(e)};require(["dataFlow/UI/tableValueEnterer"],function(o){new o(n,e,t,i,a.model.type)})}},t.getWorkspaceSingleton().setupDraggableView(this),this.setupStretchyWire()}function a(e,t,i){r.call(this,e,t,i),this.connectedOutputViews=[],this.connectionWires=[];var a=this;this.listenTo(this.glObject.parent,"changePosition",function(){n.each(this.connectedOutputViews,function(e,t){a.redrawWireForConnectedOutput(e,a.connectionWires[t])})}),this.listenTo(this.cssObject,"drop",function(e,t){!0===t[o.KEYS.SHIFT]?this.model.connectAdditionalOutput(e.IOView.model,!0):this.model.connectOutput(e.IOView.model)}),this.listenTo(this.model,"connectedOutput",this.connectToOutput),this.listenTo(this.model,"disconnectedOutput",this.disconnectFromOutput)}function s(e,t,n){r.call(this,e,t,n),this.stretchyCurveArguments.reverse()}return a.prototype.objectType="InputView",a.prototype.remove=function(){var e=this;n.each(this.connectionWires,function(t){e.glObject.parent.parent.remove(t)}),this._remove()},a.prototype.connectToOutput=function(e){var n=e.IOView;t.getWorkspaceSingleton().render();var o=this;this.connectedOutputViews.push(n);var i=this.redrawWireForConnectedOutput(n);this.glObject.parent.parent.add(i),this.connectionWires.push(i),this.listenTo(n.glObject.parent,"changePosition",function(){o.redrawWireForConnectedOutput(n,i)}),t.getWorkspaceSingleton().render()},a.prototype.disconnectFromOutput=function(e){var o=e.IOView,i=n.indexOf(this.connectedOutputViews,o),r=this.connectionWires[i];this.connectionWires=n.without(this.connectionWires,r),this.connectedOutputViews=n.without(this.connectedOutputViews,o),r.parent.remove(r),t.getWorkspaceSingleton().render()},a.prototype.removeAllWires=function(){var e=this;n.each(this.connectionWires,function(e){e.parent.remove(e)}),n.each(this.connectedOutputViews,function(t){e.stopListening(t.glObject.parent,"changePosition")}),this.connectionWires=[],this.connectedOutputViews=[]},a.prototype.drawAllConnections=function(){var e=this,t=this.model._listeningTo;n.isEmpty(t)||n.each(n.values(t),function(t){e.connectToOutput.call(e,t)})},a.prototype.redrawWireForConnectedOutput=function(e,n){e.glObject.updateMatrixWorld(),this.glObject.updateMatrixWorld();var o=(new i.Vector3).setFromMatrixPosition(this.glObject.matrixWorld),r=(new i.Vector3).setFromMatrixPosition(e.glObject.matrixWorld);return t.getWorkspaceSingleton().drawCurveFromPointToPoint(r,o,n)},s.prototype.remove=function(){this._remove()},s.prototype.objectType="OutputView",{InputView:a,OutputView:s}}),define("dataFlow/UI/spreadsheetView",["jquery","underscore","dataFlow/dataTree","HandsontableWrapper","dataFlow/enums","dataFlow/UI/tableValueEnterer"],function(e,t,n,o,i,r){function a(e){this.initSpreadsheet.apply(this,arguments)}return a.prototype.createOverlay=r.prototype.createOverlay,a.prototype.destroy=r.prototype.destroy,a.prototype.initSpreadsheet=function(e,n,o,i,r,a){this.callback=i,this.data=e,this.dataType=r,this.readOnly=!0,t.bindAll(this,"initializeTable"),this.overlay=this.createOverlay(),this.$tableContainer=this.insertTable();var s=t.keys(this.data),l=t.map(this.data,function(e){return e}),c=t.keys(this.data[s[0]]),p=t.map(c,function(e){return t.pluck(l,e)});this.dataArray=p,this.initializeTable()},a.prototype.initializeTable=function(){var e=t.keys(this.data);this.table=new o(this.$tableContainer.find("#editableTable").get(0),{data:this.dataArray,colWidths:100,minSpareRows:50,minSpareCols:15,readOnly:!0,colHeaders:e,rowHeaders:t.keys(this.data[e[0]])})},a.prototype.insertTable=function(){var t=e(window).height(),n=e("<div class='tableView'><div id='editableTable' style='position:relative; height:"+(t-60)+"px; overflow: hidden;'></div></div>");return n.css({top:50,left:10,right:10,bottom:10,"z-index":102,position:"fixed",display:"block"}),e("body").append(n),n},a}),define("dataFlow/UI/sliderView",["jquery","bootstrap-slider"],function(e){function t(e,t,n,o,i,r){this.init.apply(this,arguments)}return t.prototype.init=function(t,n,o,i,r,a,s){var l=this.createOverlay(),c="slider_"+Math.floor(1e4*Math.random()),p=e("<input id='"+c+"'></input>");e("body").append(p),p.slider({min:n,max:o,step:i?1:.01,value:t,selection:"none",tooltip:"always",id:"a"+c}),e("#a"+c).css({top:a+"px",left:r+"px"}),p.on("slide slideStop",function(){s(p.slider("getValue"))}),this.sliderInput=p,this.overlay=l},t.prototype.createOverlay=function(){var t="overlay_"+Math.floor(1e4*Math.random()),n=e("<input id='"+t+"' class='TOP workspaceOverlay'></input>");e("body").append(n);var o=this;return n.on("click",function(){o.sliderInput.slider("destroy"),o.sliderInput.remove(),o.overlay.off(),o.overlay.remove()}),n},t}),define("dataFlow/UI/componentView",["jquery","dataFlow/dataFlow_loader","dataFlow/UI/workspaceView","dataFlow/UI/inputOutputView","underscore","backbone","three","dataFlow/dataTree"],function(e,t,n,o,i,r,a,s){function l(e){var t=this;i.extend(this,h.prototype,{click:function(e,t){this.displayVals()},displayVals:function(){console.log("displayvals on spreadsheetcomponentview is called");var e=[];t.component.getOutput("D").getTree().recurseTree(function(t,n){e.push(n),i.each(t,function(t){e.push(t)})}),Promise.all(e).then(function(e){i.each(e,function(e,t){if("Node"!==e.objectType)return require(["dataFlow/UI/spreadsheetView"],function(t){new t(JSON.parse(e.text))}),void console.warn("TODO: MULTIPLE SPREADSHEETS SHOULD IDEALLY BE HANDLED")})})}}),t.init(e)}function c(e){var t=this,o=i.template("<div class='pathNodeTitle'>{<%= path %>}</div>"),r=i.template("<div class='dataRow'><%= text %></div>");i.extend(this,h.prototype,{displayVals:function(){var e="",n=[];t.component.getOutput("D").getTree().recurseTree(function(e,t){n.push(t),i.each(e,function(e){n.push(e)})}),Promise.all(n).then(function(n){i.each(n,function(t,n){"Node"===t.objectType?e+=o({path:t.getPath()}):(console.log(t),e+=r({text:t.text.replace(/\n/g,"<br />")}))}),t.printArea.innerHTML=e})},createComponentWithNamePosition:function(e,o,i){var r=document.createElement("div");r.className="draggable PrintComponent freezeZooming";var s=document.createElement("div");s.className="printComponentTextArea",t.printArea=s,r.appendChild(s),r.width="700px",r.height="320px";var l=new a.CSS3DObject(r);return l.position.x=o||0,l.position.y=i||0,l.position.z=0,n.getWorkspaceSingleton().scene.add(l),r.uuid=l.uuid,l}}),t.init(e),t.listenTo(t.component.getOutput("D"),"change",t.displayVals)}function p(e){var t=this,o=i.template("<div class='pathNodeTitle'>{<%= path %>}</div>"),r=(i.template("<div class='dataRow'><%= text %></div>"),i.template("<div class='dataRow'><img src='data:image/png;base64,<%= pngdata %>' /></div>"));i.extend(this,h.prototype,{displayVals:function(){var e="",n=[];t.component.getOutput("D").getTree().recurseTree(function(e,t){n.push(t),i.each(e,function(e){n.push(e)})}),Promise.all(n).then(function(n){i.each(n,function(t,n){"Node"===t.objectType?e+=o({path:t.getPath()}):i.each(t,function(t){e+=r({pngdata:t})})}),t.printArea.innerHTML=e})},createComponentWithNamePosition:function(e,o,i){var r=document.createElement("div");r.className="draggable PrintComponent freezeZooming";var s=document.createElement("div");s.className="printComponentTextArea",t.printArea=s,r.appendChild(s),r.width="700px",r.height="320px";var l=new a.CSS3DObject(r);return l.position.x=o||0,l.position.y=i||0,l.position.z=0,n.getWorkspaceSingleton().scene.add(l),r.uuid=l.uuid,l}}),t.init(e),t.listenTo(t.component.outputs[0],"change",t.displayVals)}function d(e){var t=this;i.extend(this,h.prototype,{doubleclick:function(e,n){var o=t.component.getInput("B").getTree();o.setDataAtPath(!o.dataAtPath([0])[0],[0])},displayVals:function(){i.isEmpty(this.component.getOutput("B").getTree().dataAtPath([0]))?this.setDisplayLabel(this.component.get("componentPrettyName")):this.setDisplayLabel(this.component.getOutput("B").getTree().dataAtPath([0]).toString())}}),this.init(e),this.listenTo(this.component.getOutput("B"),"change",this.displayVals)}function u(e){var t=this;i.extend(this,h.prototype,{click:function(t,n){var o=e.getOutput("N").getFirstValueOrDefault(),i=e.getInput("S").getFirstValueOrDefault(),r=e.getInput("E").getFirstValueOrDefault(),a=e.getInput("I").getFirstValueOrDefault(),s=this.sliderUpdateValue;require(["dataFlow/UI/sliderView"],function(e){new e(o,i,r,a,t,n,s)})},sliderUpdateValue:function(n){e.storeUserData(n),t.displayVals()},displayVals:function(){i.isEmpty(this.component.getOutput("N").getTree().dataAtPath([0]))?this.setDisplayLabel(this.component.get("componentPrettyName")):this.setDisplayLabel(this.component.getOutput("N").getTree().dataAtPath([0]).toString())}}),i.bindAll(this,"click","sliderUpdateValue"),this.init(e)}function h(e){this.init(e)}return l.prototype.objectType="SpreadsheetComponentView",c.prototype.objectType="PrintComponentView",p.prototype.objectType="MatPlotLibComponentView",d.prototype.objectType="BooleanToggleComponentView",u.prototype.objectType="SliderComponentView",h.prototype.init=function(e){this.component=e,i.extend(this,r.Events),i.bindAll(this,"processIOViews","createGLElementToMatch"),this.cssObject=this.createComponentWithNamePosition(this.component.get("componentPrettyName"),this.component.position.x,this.component.position.y),i.defer(function(){this.glObject=this.createGLElementToMatch(this.cssObject),n.getWorkspaceSingleton().setupDraggableView(this),1==this.component.get("sufficient")&&this.changeSufficiency(),this.listenTo(this.glObject,"changePosition",function(){e.position=this.glObject.position})}.bind(this)),e.componentView=this,this.inputViews={},this.outputViews={},this.processIOViews(this.component.inputs,this.inputViews,!0),this.processIOViews(this.component.outputs,this.outputViews,!1),n.getWorkspaceSingleton().render(),this.listenTo(this.component,"change:preview",this.changePreviewState),this.listenTo(this.component,"change:sufficient",this.changeSufficiency),this.listenTo(this.component,"change:componentPrettyName",this.displayVals),this.listenTo(this.component,"removed",this.remove),this.changePreviewState(),this.changeSufficiency()},h.prototype.displayVals=function(){this.setDisplayLabel(this.component.get("componentPrettyName"))},h.prototype.doubleclick=function(){this.component.getOutput().getTree().log()},h.prototype.changeSufficiency=function(){var e,t=this.component.get("sufficient");e=!0===t?"sufficient":"error"===t?"error":"insufficient";var n=this.getDisplayDiv();n.classList.remove("sufficient"),n.classList.remove("insufficient"),n.classList.remove("error"),n.classList.add(e)},h.prototype.changePreviewState=function(){var e=this.component.get("preview"),t=this.getDisplayDiv();t.classList.remove("previewOff"),!1===e&&t.classList.add("previewOff")},h.prototype.getDisplayDiv=function(){return this.cssObject.element.firstChild},h.prototype.setDisplayLabel=function(e){this.getDisplayDiv().textContent=e},h.prototype.createComponentWithNamePosition=function(e,t,o){var i=document.createElement("div");i.className="draggable";var r=document.createElement("div");r.className="componentLabel",r.textContent=e,i.appendChild(r),i.width="240px",i.height="80px";var s=new a.CSS3DObject(i);return s.position.x=t||0,s.position.y=o||0,s.position.z=0,n.getWorkspaceSingleton().scene.add(s),i.uuid=s.uuid,s},h.prototype.remove=function(){this.stopListening(),i.each(this.component.inputs,function(e){i.isEmpty(e.IOView)||e.IOView.remove()}),i.each(this.component.outputs,function(e){i.isEmpty(e.IOView)||e.IOView.remove()}),n.getWorkspaceSingleton().scene.remove(this.cssObject),n.getWorkspaceSingleton().glscene.remove(this.glObject),delete this.component.componentView,delete this.component,n.getWorkspaceSingleton().render()},h.prototype.processIOViews=function(e,n,r){var a=i.filter(e,function(e){return!0===e.get("invisible")}).length,s=60*(i.keys(e).length-1-a)/2,l=this.cssObject,c=r?o.InputView:o.OutputView,p=this.component.componentName;i.each(e,function(e,o){if(e.type!==t.OUTPUT_TYPES.NULL&&!0!==e.get("invisible")){var a=e.shortName,d=this._createIOWithNameAndParent(a,p,l,s-60*o,r,e.type),u=this;i.defer(function(){var t=u.createGLElementToMatch(d);n[a]=new c(e,t,d)})}},this)},h.prototype._createIOWithNameAndParent=function(e,t,n,o,i,r){var s=document.createElement("div");s.className="draggable IO "+t,s.textContent=e,n.element.appendChild(s);var l=new a.CSS3DObject(s);n.add(l);var c=150;try{c=parseInt(n.element.width.replace("px",""))/2+40}catch(e){console.warn("Could not parse 'width' attribute of the component's main CSS Element. This should be set both in code and in CSS, so that element size can be determined (and GL dopplegangers placed) without first rendering the element")}return l.position.z=0,l.position.y=o,l.position.x=i?-c:c,l.element.className+=i?" inputIO":" outputIO",l.addDraggableScopes([i?"input":"output",r]),l.addDroppableScopes([i?"output":"input",r]),l},h.prototype.createGLElementToMatch=function(e){var t=e.element.clientWidth,o=e.element.clientHeight;if(0===t||0===o)throw new Error("CSS Element Must be allowed to render before polling for its size.");var r=new a.Shape;r.moveTo(0,0),r.lineTo(0,o),r.lineTo(t,o),r.lineTo(t,0),r.lineTo(0,0);var s=new a.ShapeGeometry(r);s.applyMatrix((new a.Matrix4).makeTranslation(-t/2,-o/2,0));var l=new a.Mesh(s,new a.MeshBasicMaterial({color:16711680,wireframe:!0,transparent:!0,opacity:0}));l.position.set(e.position.x,e.position.y,0),e.element.uuid=e.uuid;return(i.isUndefined(this.glObject)?n.getWorkspaceSingleton().glscene:this.glObject).add(l),l},h.prototype.objectType="ComponentView",function(e){if(i.isUndefined(e)||i.isUndefined(e.recalculate)&&i.isUndefined(e.recalculateTrees))throw new Error("ComponentView objects must be instantiated with the DataFlow.Component which they represent");return"SliderComponent"===e.componentName?new u(e):"BooleanToggleComponent"===e.componentName?(console.log("creating toggler"),new d(e)):"PrintComponent"===e.componentName?new c(e):"SpreadsheetComponent"===e.componentName?new l(e):"LinePlot"===e.componentName?new p(e):new h(e)}}),define("dataFlow/project",["underscore","backbone","dataFlow/dataFlow_loader"],function(e,t,n){return t.Model.extend({defaults:function(){return{authorName:"anonymous",authorId:"",title:"",description:"",projectId:"",createdAt:new Date,updatedAt:new Date,components:[]}},initialize:function(t){e.bindAll(this,"destroy"),t&&t.components&&this.loadComponentsFromJSON(t.components)},addComponentToProject:function(e){var t=this.get("components");return t.push(e),this.listenTo(e,"removed",this.removeComponent),this.set("components",t),this.trigger("change",this),this},createComponent:function(e,t){var o,i=t||{x:0,y:0};return o=n.createComponentByName(e,{position:i}),this.addComponentToProject(o),this},removeComponent:function(t){this.stopListening(t);var n=e.without(this.get("components"),t);this.set("components",n),this.trigger("change",this)},destroy:function(){console.warn("DESTROY on project isn't really a good idea. I should just remove VIEW stuff, not DATA stuff.")},toJSON:function(){var t=e.clone(this.attributes);return t.components=e.map(t.components,function(e){return e.toJSON()}),t},loadComponentsFromJSON:function(t){var o={},i=[],r=[],a=this,s=0,l=function(e){var t=parseInt(e.replace("c",""));t>s&&(s=t)};for(e.each(t,function(t){l(t.id),t.output&&(t.outputs=t.output,delete t.output);var s=n.createComponentByName(t.componentName,e.clone(t));r.push(s),a.addComponentToProject.call(a,s),e.each(t.inputs,function(t){l(t.id),t.connections.length>0&&(o[t.id]=s[t.shortName],e.each(t.connections,function(e){!function(e){var n={};n[t.id]=e,i.push(n)}(e)}))}),e.each(s.outputs,function(e){o[e.id]=e})});parseInt(e.uniqueId("c").replace("c",""))<s;);e.each(i,function(n){var i=e.keys(n)[0],r=n[i],a=o[i],s=o[r];e.isUndefined(a.connectAdditionalOutput)||e.isUndefined(s)?(console.trace(),console.warn("COULD NOT MAKE CONNECTION!! INVESTIGATE THIS!",a,s),console.log(n),console.log(t)):a.connectAdditionalOutput(s)}),this.set("components",r)}})}),define("text!src/css/orchestra.css",[],function(){return'\na {\n    cursor: pointer;\n}\nbody {\n    margin: 0px;\n    overflow: hidden;\n}\ncanvas {\n    position:  absolute;\n    top: 0px;\n    left: 0px;\n    opacity: 0.9;\n}\n.TOP {\n    position: absolute;\n    z-index: 101;\n    /*background-color: rgba(255,255,255,0.2);*/\n    top: 0px;\n    left: 0px;\n}\n/*  TODO: These styles are needed for orchestra3d, but conflict in Jupyter-Orchestra (they make Jupyter\'s nav buttons appear above its dropdown menus, such as file, edit, etc.\n    These should be moved to a separate style sheet in orchestra, so that bootstrap conflicts can be avoided.\n */\n/*.navbar {*/\n    /*z-index: 102;*/\n    /*border-radius: 0px !important;*/\n/*}*/\n/*.navbar-project-title {*/\n    /*!*text-transform: capitalize;*!*/\n    /*float: left;*/\n    /*height: 50px;*/\n    /*padding: 15px 15px;*/\n    /*font-size: 17px;*/\n    /*line-height: 20px;*/\n    /*font-style: italic;*/\n/*}*/\n.titleChangerWidget {display: none;}\n#titleChanger {width: 400px;}\n\n/* Main Component Styling */\ndiv.componentLabel {\n    border: 1px solid black;\n    border-radius: 60px;\n    height: 80px;\n    width: 240px;\n    text-align: center;\n    font-size: 30px;\n    line-height: 80px;\n    text-transform: capitalize;\n    cursor: pointer;\n\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n\n/* Print Component Styling */\ndiv.draggable.PrintComponent {\n    /*left: 240px;*/\n}\ndiv.draggable.PrintComponent.IO {\n    /*left: -240px;*/\n}\ndiv.printComponentTextArea {\n    font-family: Menlo, Monaco, Consolas, "Courier New", monospace;\n    border: 1px solid black;\n    border-radius: 5px;\n    height: 320px;\n    width: 700px;\n    text-align: left;\n    font-size: 15px;\n    padding: 0;\n    line-height: 30px;\n    cursor: pointer;\n\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n\n    /*margin-left: 480px;*/\n    background-color: whitesmoke;\n    box-shadow: 9px 9px 19px 0px #444;\n    overflow-y: scroll;\n}\ndiv.printComponentTextArea div {\n    padding: 0 15px;\n}\n\n\n\ndiv.printComponentTextArea .pathNodeTitle {\n    background-color: #999;\n}\n\ndiv.printComponentTextArea div.dataRow  {\n    white-space: pre;\n}\ndiv.printComponentTextArea div.dataRow:nth-child(odd)  {\n    background-color: white;\n}\ndiv.printComponentTextArea div.dataRow:nth-child(even)  {\n    background-color: #dedede;\n}\n\n/*\nSupport for mixing status colors for separate properties: Preview, Sufficiency/Error, Selection\nhttps://css-tricks.com/tinted-images-multiple-backgrounds/\nPreview / Not = grey or white solid alpha image\nSufficiency / Error = clear, orange, or red transparent .TOP.workspaceOverlay\nSelection = Thick green border\n*/\n\ndiv.componentLabel.insufficient {background-color: #ffca3d;}\ndiv.componentLabel.sufficient {background-color: #e8e8e8;}\ndiv.componentLabel.error {background-color: orangered;}\n\n/*div.componentLabel.previewOff.insufficient {background-color: lightgray;}*/\ndiv.componentLabel.previewOff.sufficient {background-color:#999999;}\ndiv.componentLabel.previewOff.error {background-color:orangered}\n\ndiv.IO {\n    box-sizing: content-box;\n    position: absolute;\n    display: block;\n    background-color: #ff870c;\n    top: 0px;\n    left: 0px;\n    height: 50px;\n    width: 50px;\n    border-radius: 50px;\n\n    color: white;\n    font-size: 35px;\n    line-height: 50px;\n    text-align: center;\n    font-weight: bold;\n\n    -webkit-user-select: none;       \n    -moz-user-select: none; \n    -ms-user-select: none; \n    -o-user-select: none;\n    user-select: none;\n}\ndiv.IO:hover {\n    box-sizing: content-box;\n    border: 5px solid orange;\n    cursor: pointer;\n}\ndiv.IO.glHover {\n    background-color: red;\n}\n\n.glHover input {\n    border: 10px solid red;\n}\n.dragging {\n    pointer-events: none;\n}\n\n/* Help Tooltip / Popovers */\n.io_tooltip {\n    margin: -9px -14px;\n    list-style: none;\n    padding-left: 0;\n}\n.io_tooltip .io_description {\n    font-style: italic;\n    margin: 9px;\n    display: inline-block;\n    font-size: 17px;\n    font-weight: bold;\n}\n.io_tooltip .io_isRequired {\n    width: 80px;\n    display: inline-block;\n    margin: 0px 9px;\n    color: #999;\n    font-size: 11px;\n    vertical-align: middle;\n}\n.io_tooltip li {\n    max-width: 180px;\n    display: block;\n}\n.io_tooltip_field_title {\n    width: 80px;\n    line-height: 16px;\n    display: inline-block;\n    margin: 9px;\n    color: #999;\n    font-size: 11px;\n    vertical-align: middle;\n}\n.io_tooltip_field_value {\n    color: #333;\n    font-weight: bold;\n    font-size: 16px;\n    width: 60px;\n    text-align: left;\n    line-height: 16px;\n    vertical-align: middle;\n    display: inline-block;\n}\n.cmpt_tooltip_title_modulename {\n    font-weight: normal;\n    color: #999;\n    font-size: 10px;\n}\n.cmpt_error_line {\n    color: red;\n    font-family: Menlo, Monaco, Consolas, "Courier New", monospace;\n    width: 600px;\n    font-size: 12px;\n}\n.cmpt_error_line .err_type {\n    width: 75px;\n    text-align: left;\n    font-weight: bold;\n}\n.cmpt_error_line .err_msg {\n    text-align: left;\n    width: 525px;\n}\n.cmpt_tooltip .cmpt_description {\n    font-weight: normal;\n    font-size: 20px;\n    margin-bottom: 10px;\n}\n.cmpt_tooltip .cmpt_io_container {\n\n}\n.cmpt_tooltip .cmpt_io_container .cmpt_io_title{\n    font-weight: bold;\n    color: #333;\n    margin-left: 50px;\n}\n.cmpt_tooltip .cmpt_io_container .cmpt_io{\n    margin-left: 70px;\n    display: block;\n}\n.cmpt_tooltip .cmpt_io_container .cmpt_io .cmpt_io_name {\n    font-weight: bold;\n    font-size: 12px;\n    vertical-align: top;\n}\n.cmpt_tooltip .cmpt_io_container .cmpt_io .cmpt_io_details {\n    color: #666;\n    font-size: 12px;\n    max-width: 250px;\n    display: inline-block;\n    margin-left: 8px;\n}\n.cmpt_tooltip  .cmpt_io_required_legend {\n    font-size: 11px;\n    color: #999;\n}\n\n\n\n\n/* Slider custom overrides. Can be copied to slider\'s CSS eventually */\n.slider {\n    z-index: 102; /* Make sure the tooltip comes above bootstrap nav items */\n    margin-left: -100px;\n    margin-top: -50px;\n}\n.slider .tooltip {\n    background-color: transparent;\n}\n.TOP.workspaceOverlay {\n    z-index: 101;\n    background-color: rgba(0,0,0,0.5);\n    width: 100%;\n    height: 100%;\n    border: none;\n}\n\n/* Context menu stuff */\n.context-menu {\n    position: absolute;\n    display: none;\n}\n.context-menu .dropdown-menu {\n    top: 0;\n    display: block;\n}\n.context-menu .icongutter {\n    width: 30px;\n    display: inline-block;\n}\n.context-menu input {\n    border-radius: 17px;\n    border: 1px solid lightgray;\n    padding-left: 23px;\n}\n.context-menu input:focus {\n    outline-width: 0;\n}\n.context-menu .comp_Name {\n    height: 40px;\n    vertical-align: middle;\n    line-height: 40px;\n    margin-left: 20px;\n    font-weight: bold;\n    font-style: italic;\n}\n\n/* Roaming component searchbar / typeahead */\n.mobileComponentSearchInput {\n    z-index: 102;\n    position: absolute;\n    display: block;\n    width: 310px;\n    line-height: 30px;\n    padding: 4px 19px;\n    border-radius: 10px;\n    outline: none;\n    border: 1px solid #CCC;\n    font-size: 20px;\n    font-weight: bold;\n}\n'}),define("orchestraApp",["jquery","underscore","backbone","dataFlow/dataFlow_loader","dataFlow/UI/workspaceView","dataFlow/UI/componentView","dataFlow/project","dataFlow/components/engine","dataFlow/pulse","dataFlow/freezeCalculations","text!src/css/orchestra.css"],function(e,t,n,o,i,r,a,s,l,c,p){function d(e){e?this.setupEngine(e):console.error("Python Engine Not Initialized. All Python Functions will Error."),t.extend(this,n.Events),this.init()}e("head").append("<style type='text/css'>"+p+"</style");var u=0,h=[];return window.LOG_TIME_EVENT=function(e,t){var n=(new Date).getTime(),o={};o[e]=n-u,h.push(o),u=n,t&&(u=0,h=[])},d.prototype.init=function(){this.currentProject=null,t.bindAll(this,"newProject","clearWorkspace","loadJSON","initializePulses"),this.workspace=new i.Workspace,this.workspace.createWorkspace(),this.currentProject=new a;var e=this;this.workspace.on("createNewComponent",function(t){e.newComponent.call(e,t)})},d.prototype.newComponent=function(e){var t=this,n=e.position||this.workspace.getCurrentVisibleCenterPoint(),i=o.createComponentByName(e.functionName,{position:n});this.currentProject.addComponentToProject(i),i.on("requestFileExport",function(e){t.exporter.export(e)}),new r(i)},d.prototype.newProject=function(){this.clearWorkspace(),this.loadWorkspace(this.currentProject)},d.prototype.clearWorkspace=function(){c.setFrozen(!0),console.warn("DO SOME TESTS TO MAKE SURE THAT ZOMBIES DONT REMAIN"),this.stopListening(),t.isNull(this.currentProject)||t.each(this.currentProject.get("components").slice(0),function(e){e.componentView.remove()}),this.currentProject=new a,this.workspace.render()},d.prototype.getDisplayState=function(){return{workspace:this.workspace.toJSON()}},d.prototype.loadJSON=function(e){this.clearWorkspace();var t=this;require(["dataFlow/project"],function(n){t.loadWorkspace(new n(e))})},d.prototype.loadWorkspace=function(e){c.setFrozen(!0);var n=this;this.currentProject=e,this.listenTo(this.currentProject,"change",function(e){n.trigger("change",e.toJSON())}),t.each(e.get("components"),function(e){e.on("requestFileExport",function(e){n.exporter.export(e)}),new r(e)}),t.defer(function(){t.each(e.get("components"),function(e){t.each(e.inputs,function(e){var t=e.IOView;t&&t.drawAllConnections()})})}),e.get("contextData")&&this.workspace.fromJSON(e.get("contextData").workspace),this.initializePulses(e)},d.prototype.initializePulses=function(e){c.setFrozen(!1),t.each(e.get("components"),function(e){var n=0;if(t.each(e.inputs,function(e){0!==t.keys(e._listeningTo).length||e.getTree().isEmpty()?!0===e.get("invisible")&&n++:n++}),n===e.inputs.length){var o=e.inputs[0];o.trigger("pulse",new l({startPoint:o}))}})},d.prototype.setupEngine=function(e){console.warn("SETUP ENGINE NEEDS TO BE IMPLEMENTED NOW"),s.setup(e),s.resetTranscript()},d.prototype.getTranscript=function(){return s.getTranscript()},d.prototype.close=function(){console.warn("Orchestra.Close() not yet implemented. It needs to clean up and remove UI."),this.workspace.destroy(),this.trigger("closed",this.currentProject.toJSON()),this.off()},d}),require.config({baseUrl:"/nbextensions/orchestra-jupyter/",urlArgs:"bust="+(new Date).getTime(),bundles:{libs:["Handsontable","numbro","pikaday","moment","three","backbone","underscore","bootstrap3-typeahead","bootstrap-slider"]},paths:{libs:["https://rawgit.com/strandedcity/orchestra-jupyter/master/dist/orchestra-libraries","dist/orchestra-libraries","/nbextensions/orchestra-jupyter/orchestra-libraries"],HandsontableWrapper:"lib/handsontable.wrapper",text:"lib/text",OrbitControls:"src/dataFlow/UI/OrbitControls",CSS3DRenderer:"src/dataFlow/UI/CSS3DRenderer",componentSearcher:"src/application/componentSearcher",dataFlow:"src/dataFlow",orchestraApp:"app"}}),define(["base/js/namespace","orchestraApp","jquery","base/js/dialog"],function(e,t,n,o){function i(o){console.log("Opening Orchestra Visual Flow Programming"),console.warn("Disabling Jupyter Keyboard Shortcuts for Orchestra"),e.notebook.keyboard_manager.disable();var i=new t(e);i.loadJSON(o.metadata[a]),o.orchestra_application=i,i.on("change",function(e){o.metadata[a]=e}),i.on("closed",function(t){o.metadata[a]=t,console.warn("Enabling Jupyter Keyboard Shortcuts"),e.notebook.keyboard_manager.enable()});var s=n('<button class="btn btn-large closeOrchestraButton" style="z-index:500;position: absolute;top: 10px;left: 10px;">Return to Jupyter</button>');n("body").append(s),s.on("click",function(){var e=i.getTranscript();if("#"==e.charAt(0)){var t=e.split("\n");t.splice(1,0,r),e=t.join("\n")}o.code_mirror.setValue(e),i.close(),s.off(),s.hide(250,function(){s.remove()})})}var r="### This cell contains Orchestra Visual Flow Programming Project Data. \n### Output variables will be defined here for use lower in your notebook. \n### Please do not edit this cell's contents directly, as your changes may be overwritten.\n###\n### If You do not have the Orchestra VFP Extension Installed, please visit:\n### https://OrchestraMachineLearning.com/install-jupyter-extension/\n",a="orchestraData";return{load_ipython_extension:function(){var t={icon:"fa-cubes",help:"Orchestra Visual Flow Programming",help_index:"orchestra",handler:function(e){require(["HandsontableWrapper"]);var t=e.notebook.get_selected_cell();if("object"==typeof t.metadata[a])i(t);else{function n(){t.metadata[a]={},t.code_mirror.setValue(r),i(t)}o.modal({buttons:{OK:{class:"btn btn-primary btn-lg",click:n},Cancel:{class:"btn btn-lg",click:function(){}}},title:"Convert Cell?",body:"<span style='font-size:15px;'>This cell does not have any Orchestra data associated with it. Convert cell now?<br /><br />Cell contents will be overwritten!</span>",sanitize:!1})}}},n=e.notebook.keyboard_manager.actions.register(t,"run-orchestra-vfp","auto");e.toolbar.add_buttons_group([n])}}});